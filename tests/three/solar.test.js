import test from 'tape'
import spacetime from './_lib.js'

test('toronto', (t) => {
  let arr = [
    ['2022-01-01', '7:52am', '4:51pm'],
    ['2022-01-15', '7:49am', '5:06pm'],
    ['2022-01-29', '7:38am', '5:25pm'],
    ['2022-02-12', '7:21am', '5:44pm'],
    ['2022-02-26', '7:00am', '6:03pm'],
    ['2022-03-12', '6:36am', '6:20pm'],    // -dst-
    ['2022-03-26', '7:11am', '7:37pm'],
    ['2022-04-09', '6:46am', '7:54pm'],
    ['2022-04-23', '6:23am', '8:10pm'],
    ['2022-05-07', '6:03am', '8:27pm'],
    ['2022-05-21', '5:48am', '8:43pm'],
    ['2022-06-04', '5:39am', '8:55pm'],
    ['2022-06-18', '5:36am', '9:03pm'],
    ['2022-07-02', '5:41am', '9:03pm'],
    ['2022-07-16', '5:51am', '8:57pm'],
    ['2022-07-30', '6:05am', '8:44pm'],
    ['2022-08-13', '6:21am', '8:26pm'],
    ['2022-08-27', '6:36am', '8:04pm'],
    ['2022-09-10', '6:52am', '7:39pm'],
    ['2022-09-24', '7:08am', '7:13pm'],
    ['2022-10-08', '7:24am', '6:48pm'],
    ['2022-10-22', '7:41am', '6:24pm'],
    ['2022-11-05', '7:59am', '6:05pm'], //dst
    ['2022-11-19', '8:18am', '5:50pm'],
    ['2022-12-03', '8:34am', '5:42pm'],
    ['2022-12-17', '8:46am', '5:43pm']
  ]
  let tz = 'America/Toronto'
  arr.forEach(a => {
    let [iso, sunrise, sunset] = a
    let s = spacetime(iso, tz).add(10, 'hours')
    t.equal(s.sunrise().time(), sunrise, `Toronto-sunrise - ${iso}`)
    t.equal(s.sunset().time(), sunset, `Toronto-sunset - ${iso}`)
  })
  t.end()
})


test('Riyadh', (t) => {
  let arr = [
    ['2022-01-01', '6:38am', '5:16pm'],
    ['2022-01-15', '6:40am', '5:26pm'],
    ['2022-01-29', '6:38am', '5:37pm'],
    ['2022-02-12', '6:31am', '5:46pm'],
    ['2022-02-26', '6:20am', '5:55pm'],
    ['2022-03-12', '6:07am', '6:01pm'],
    ['2022-03-26', '5:52am', '6:07pm'],
    ['2022-04-09', '5:38am', '6:13pm'],
    ['2022-04-23', '5:25am', '6:19pm'],
    ['2022-05-07', '5:15am', '6:26pm'],
    ['2022-05-21', '5:08am', '6:34pm'],
    ['2022-06-04', '5:05am', '6:40pm'],
    ['2022-06-18', '5:05am', '6:45pm'],
    ['2022-07-02', '5:09am', '6:47pm'],
    ['2022-07-16', '5:14am', '6:45pm'],
    ['2022-07-30', '5:21am', '6:40pm'],
    ['2022-08-13', '5:27am', '6:31pm'],
    ['2022-08-27', '5:33am', '6:19pm'],
    ['2022-09-10', '5:38am', '6:04pm'],
    ['2022-09-24', '5:43am', '5:49pm'],
    ['2022-10-08', '5:49am', '5:35pm'],
    ['2022-10-22', '5:55am', '5:22pm'],
    ['2022-11-05', '6:03am', '5:12pm'],
    ['2022-11-19', '6:13am', '5:06pm'],
    ['2022-12-03', '6:23am', '5:05pm'],
    ['2022-12-17', '6:32am', '5:08pm']
  ]
  let tz = 'Asia/Riyadh'
  arr.forEach(a => {
    let [iso, sunrise, sunset] = a
    let s = spacetime(iso, tz).add(10, 'hours')
    t.equal(s.sunrise().time(), sunrise, `Riyadh-sunrise - ${iso}`)
    t.equal(s.sunset().time(), sunset, `Riyadh-sunset - ${iso}`)
  })
  t.end()
})

