/* spencermountain/spacetime 7.4.0 Apache 2.0 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.spacetime = factory());
})(this, (function () { 'use strict';

  var world = {
    methods: {
      // this should be the only Date call, anywhere
      now: () => new Date().getTime(),
      // stub for proper input parsing
      parse: (input) => input
    },
    model: {},
    config: {},
    zones: {}
  };

  // import parse from './01-one/methods/parse/index.js'


  class SpaceTime {
    constructor(input, tz) {
      // define data
      Object.defineProperty(this, 'world', { value: world });
      // generate an epoch, when possible
      let res = world.methods.parse(input, tz, world);
      //the holy UNIX moment
      this._epoch = res.epoch;
      //the IANA code for the current timezone
      this.tz = res.tz;
      // this is handy, too
      Object.defineProperty(this, 'isSpacetime', { value: true });
    }

    get epoch() {
      // is it playing?
      if (this.isRunning && this.startEpoch !== null) {
        let ms = this.methods.now() - this.startEpoch;
        return this._epoch + ms
      }
      return this._epoch
    }
  }

  // builder/factory
  SpaceTime.prototype._from = function (input, tz) {
    let s = new SpaceTime(input, tz || this.tz);
    s.started = this.started;
    s.world = this.world;
    return s
  };
  // Object.assign(SpaceTime.prototype, api)

  // add method aliases
  // const aliases = [
  //   ['hours', 'hour'],
  //   ['minutes', 'minute'],
  //   ['seconds', 'second'],
  //   ['minus', 'subtract'],
  //   ['plus', 'add'],
  //   ['isDst', 'inDst'],
  //   ['set', '_from'],
  // ]
  // aliases.forEach(a => {
  //   SpaceTime.prototype[a[0]] = SpaceTime.prototype[a[1]]
  // })


  var Spacetime = SpaceTime;

  var version = '7.4.0';

  const lib = (input, tz) => new Spacetime(input, tz);
  // lib.world = () => world


  Object.defineProperty(lib, 'world', { value: world });

  lib.plugin = function (plg) {
    Object.assign(lib.world.zones, plg.zones || {});
    Object.assign(lib.world.config, plg.config || {});
    Object.assign(lib.world.model, plg.model || {});
    Object.assign(Spacetime.prototype, plg.api || {});
    Object.assign(lib.world.methods, plg.methods || {});
  };
  lib.version = version;

  //some helper functions on the main method
  lib.now = (tz) => new Spacetime(null, tz);
  lib.today = (tz) => lib.now(tz).startOf('day');
  lib.tomorrow = (tz) => lib.today(tz).add(1, 'day');
  lib.yesterday = (tz) => lib.today(tz).minus(1, 'day');
  lib.zones = function () {
    return this.world.zones
  };

  var lib$1 = lib;

  const SECOND = 1000;
  const MINUTE = 60 * SECOND;
  const HOUR = 60 * MINUTE;
  const DAY = 24 * HOUR;
  const YEAR = 365 * DAY; // (non-leap)

  var model = {
    months: [
      { long: 'January', short: 'Jan', len: 31 },
      { long: 'February', short: 'Feb', len: 28 }, // 29 in a leap year
      { long: 'March', short: 'Mar', len: 31 },
      { long: 'April', short: 'Apr', len: 30 },
      { long: 'May', short: 'May', len: 31 },
      { long: 'June', short: 'Jun', len: 30 },
      { long: 'July', short: 'Jul', len: 31 },
      { long: 'August', short: 'Aug', len: 31 },
      { long: 'September', short: 'Sep', len: 30 },
      { long: 'October', short: 'Oct', len: 31 },
      { long: 'November', short: 'Nov', len: 30 },
      { long: 'December', short: 'Dec', len: 31 },
    ],

    days: [
      { long: 'sunday', short: 'sun' },
      { long: 'monday', short: 'mon' },
      { long: 'tuesday', short: 'tue' },
      { long: 'wednesday', short: 'wed' },
      { long: 'thursday', short: 'thu' },
      { long: 'friday', short: 'fri' },
      { long: 'saturday', short: 'sat' }
    ],

    time: {
      am: 'am',
      pm: 'pm'
    },

    ms: {
      SECOND, MINUTE, HOUR, DAY, YEAR
    },

    // units: {
    //   second: [1, 'second'],
    //   decade: [10, 'year'],
    // }
  };

  var config$1 = {

    // should spacetime crash when it gets an unparsable date?
    throwUnparsedDate: true,

    // should spacetime crash when it gets an unknown timezone?
    throwUnknownTz: false,

    // local timezone
    tryLocalTimezone: true,

    // if Intl.DateTimeFormat is not supported - fallback to UTC
    fallbackTz: 'Etc/Utc',


    // automatically in .format()
    useTitleCase: true,

    //default is Monday
    weekStart: 1,


    // assume the british interpretation of 02/02/2018, etc
    preferDMY: false,
  };

  // ===  spacetime /one doesn't have timezones ==
  // but we can shim-in these Etc ones, which work okay

  let zones$3 = { 'Etc/GMT': { offset: 0, hem: 'n' } };

  // generate these sorta-fake timezones 
  for (let i = -14; i <= 14; i += 0.5) {
    let num = i;
    if (num > 0) {
      num = '+' + num;
    }
    // Etc/GMT-5
    let name = 'Etc/GMT' + num;
    zones$3[name] = {
      offset: i * -1, //they're negative!
      hem: 'n' //(sorry)
    };
    let alias = 'UTC/GMT' + num; //this one too, why not.
    zones$3[alias] = zones$3[name];
  }
  // these appear sometimes
  zones$3['Etc/GMT+0'] = zones$3['Etc/GMT'];
  zones$3['Etc/GMT-0'] = zones$3['Etc/GMT'];

  var zones$4 = zones$3;

  // determine current day (mon, tues)
  // using 'Key-Value Method' from - https://artofmemory.com/blog/how-to-calculate-the-day-of-the-week/

  // const DAYS = [
  //   'Sunday',
  //   'Monday',
  //   'Tuesday',
  //   'Wednesday',
  //   'Thursday',
  //   'Friday',
  //   'Saturday',
  // ];

  const month_code = function (n) {
    let month_codes = [
      null,
      0, //January
      3, //February
      3, //March
      6, //April
      1, //May
      4, //June
      6, //July
      2, //August
      5, //September
      0, //October
      3, //November
      5, //December
    ];
    return month_codes[n]
  };

  const year_code = function (year) {
    let yy = year % 100;
    return (yy + parseInt(yy / 4, 10)) % 7;
  };

  const century_code = function (year) {
    //julian
    if (year < 1752) {
      let c = parseInt(year / 100, 10);
      return (18 - c) % 7;
    }
    //gregorian
    let c = parseInt(year / 100, 10);
    let codes = {
      '17': 4, // 1700s = 4
      '18': 2, // 1800s = 2
      '19': 0, // 1900s = 0
      '20': 6, // 2000s = 6
      '21': 4, // 2100s = 4
      '22': 2, // 2200s = 2
      '23': 0, // 2300s = 0
    };
    return codes[String(c)] || 0
  };

  // https://www.timeanddate.com/date/leapyear.html
  const leap_code = function (year) {
    let is_leap = (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    if (is_leap === true) {
      return -1
    } else {
      return 0
    }
  };

  // which day of the week is it?
  const getDay = function (year, month, date) {
    let yc = year_code(year);
    let mc = month_code(month);
    let cc = century_code(year);
    let dc = date;
    let lc = leap_code(year);
    // (Year Code + Month Code + Century Code + Date Number - Leap Year Code) mod 7
    let day = (yc + mc + cc + dc + lc) % 7;
    return day
    // return DAYS[day]
  };
  var getDay$1 = getDay;


  // 1969-07-20 - sunday
  // 1897-03-14 - sunday
  //1066-10-14 -sat
  // let cal = { year: 2022, month: 10, date: 13 }
  // let cal = { year: 1066, month: 10, date: 14 }
  // let cal = { year: 1897, month: 3, date: 14 }
  // let cal = { year: 1969, month: 7, date: 20 }

  const isNum = val => typeof val === 'number';

  // import world from '../../../../world.js'

  let mapping$2 = {};
  // world.i18n.months.longForm.forEach((str, i) => {
  //   mapping[str.toLowerCase()] = i + 1
  //   let shrt = world.i18n.months.shortForm[i] || ''
  //   mapping[shrt.toLowerCase()] = i + 1
  // })
  mapping$2.sept = 9;//extra

  const parseMonth = function (input) {
    if (isNum(input)) {
      return input
    }
    input = input.toLowerCase().trim();
    return mapping$2[input]
  };
  var parseMonth$1 = parseMonth;

  // parse '+05:30' offset according to ISO8601 - 
  //  could be +hh:mm, +hhmm or +hh
  const reg = /^([+-])?([0-9]{1,2}):?([0-9]{2})?$/;

  //pull-apart ISO offsets, like "+0100"
  const parseOffset = (str) => {
    if (!str) {
      return null
    }
    // 'Zulu' is 0
    if (str === 'Z' || str === 'z') {
      return 0
    }
    // tokenize it
    let m = str.match(reg);
    if (m !== null) {
      let [, plus, hour, min] = m;

      hour = parseInt(hour || '', 10) || 0;
      min = parseInt(min || '', 10) || 0;

      // turn minutes into decimal - 30 -> 0.5
      min = min / 60;

      let offset = hour + min;

      // handle negative
      if (plus === '-') {
        offset *= -1;
      }
      return offset
    }
    return null

    //okay, try to match it to a utc timezone
    //remember - this is opposite! a -5 offset maps to Etc/GMT+5  ¯\_(:/)_/¯
    //https://askubuntu.com/questions/519550/why-is-the-8-timezone-called-gmt-8-in-the-filesystem
    // num *= -1
    // return num

    // if (num >= 0) {
    //   num = '+' + num
    // }
    // let tz = 'etc/gmt' + num
    // let zones = s.timezones
    // if (zones[tz]) {
    // log a warning if we're over-writing a given timezone?
    // console.log('changing timezone to: ' + tz)
    // s.tz = tz
    // }
    // return s
  };
  var parseOffset$1 = parseOffset;

  const parseHour = function (str) {
    if (isNum(str)) {
      return str
    }
    str = str.trim().toLowerCase();
    // leading 0s
    str = str.replace(/^[0:]+/, '');
    // '4h'
    str = str.replace(/([0-9])h$/, '$1');
    // '4'
    let n = parseInt(str, 10);
    if (n) {
      return n
    }
    //'5pm'
    let m = str.match(/([0-9]+) ?(am|pm)$/);
    if (m !== null && m[1]) {
      let h = Number(m[1]);
      if (m[2] === 'pm') {
        h += 12;
      }
      return h
    }
    return 0
  };
  var parseHour$1 = parseHour;

  const startOfDay = {
    hour: 0,
    minute: 0,
    second: 0,
    millisecond: 0,
  };


  // truncate any sub-millisecond values
  const parseMs = function (str = '') {
    str = String(str);
    //js does not support sub-millisecond values 
    // so truncate these - 2021-11-02T19:55:30.087772
    if (str.length > 3) {
      str = str.substring(0, 3);
    } else if (str.length === 1) {
      // assume ms are zero-padded on the left
      // but maybe not on the right.
      // turn '.10' into '.100'
      str = str + '00';
    } else if (str.length === 2) {
      str = str + '0';
    }
    return Number(str) || 0
  };

  const parseTime = (str = '', obj) => {
    obj = Object.assign({}, startOfDay, obj);
    // remove all whitespace
    str = str.replace(/^\s+/, '').toLowerCase();
    //formal time format - 04:30.23
    let arr = str.match(/([0-9]{1,2}):([0-9]{1,2}):?([0-9]{1,2})?[:.]?([0-9]{1,4})?/);
    if (arr !== null) {
      //validate it a little
      let h = Number(arr[1]);
      if (h < 0 || h > 24) {
        return obj
      }
      let m = Number(arr[2]); //don't accept '5:3pm'
      if (arr[2].length < 2 || m < 0 || m > 59) {
        return obj
      }
      obj.hour = h;
      obj.minute = m;
      obj.second = Number(arr[3]) || 0;
      obj.millisecond = parseMs(arr[4]);
      //parse-out am/pm
      let ampm = str.match(/[\\b0-9] ?(am|pm)\b/);
      if (ampm !== null && ampm[1] === 'pm') {
        obj.hour += 12;
      }
      return obj
    }

    // parse hour-only times
    let h = parseHour$1(str);
    if (h !== null) {
      obj.hour = h;
    }
    return obj
  };
  var parseTime$1 = parseTime;

  const parseYear = (str = '') => {
    if (isNum(str)) {
      return str
    }
    str = str.trim();
    // parse '86 shorthand
    if (/^'[0-9][0-9]$/.test(str) === true) {
      let num = Number(str.replace(/'/, ''));
      if (num > 50) {
        return 1900 + num
      }
      return 2000 + num
    }
    let year = parseInt(str, 10);
    // use a given year from options.today
    // if (!year && today) {
    //   year = today.year
    // }
    // fallback to this year
    year = year || new Date().getFullYear();//remove me
    return year
  };

  var parseYear$1 = parseYear;

  const parseDate = (str = '') => {
    if (isNum(str)) {
      return str
    }
    str = str.trim();
    // remove padding
    str = str.replace(/^0+/, '');

    //remove ordinal suffix
    str = str.replace(/([0-9])(st|nd|rd|th)$/i, '$1');

    let date = parseInt(str, 10);

    return date || 1 // coerce zero to one
  };

  var parseDate$1 = parseDate;

  const ampm = function (str) {
    str = str.trim().toLowerCase();
    // a.m.
    str = str.replace(/\./g, '');
    if (str === 'am' || str === 'pm') {
      return str
    }
    return null
  };
  var parseAmpm = ampm;

  var ymd = [
    // =====
    //  y-m-d
    // =====
    //iso-this 1998-05-30T22:00:00:000Z, iso-that 2017-04-03T08:00:00-0700
    {
      reg: /^(-?0{0,2}[0-9]{3,4})-([0-9]{1,2})-([0-9]{1,2})[T| ]([0-9.:]+)(Z|[0-9\-+:]+)?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[1]),
          month: parseInt(m[2], 10),
          date: parseDate$1(m[3])
        };
        obj.offset = parseOffset$1(m[5]);
        obj = parseTime$1(m[4], obj);
        return obj
      }
    },
    //short-iso "2015-03-25" or "2015/03/25" or "2015/03/25 12:26:14 PM"
    {
      reg: /^([0-9]{4})[-/. ]([0-9]{1,2})[-/. ]([0-9]{1,2})( [0-9]{1,2}(:[0-9]{0,2})?(:[0-9]{0,3})? ?(am|pm)?)?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[1]),
          month: parseInt(m[2], 10),
          date: parseDate$1(m[3])
        };
        if (obj.month > 12) {
          //support yyyy/dd/mm (weird, but ok)
          obj.date = parseDate$1(m[2]);
          obj.month = parseInt(m[3], 10);
        }
        obj = parseTime$1(m[4], obj);
        return obj
      }
    },

    //text-month "2015-feb-25"
    {
      reg: /^([0-9]{4})[-/. ]([a-z]+)[-/. ]([0-9]{1,2})( [0-9]{1,2}(:[0-9]{0,2})?(:[0-9]{0,3})? ?(am|pm)?)?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[1]),
          month: parseMonth$1(m[2]),
          date: parseDate$1(m[3] || '')
        };
        obj = parseTime$1(m[4], obj);
        return obj
      }
    }
  ];

  var mdy = [
    // =====
    //  m-d-y
    // =====
    //mm/dd/yyyy - uk/canada "6/28/2019, 12:26:14 PM"
    {
      reg: /^([0-9]{1,2})[-/.]([0-9]{1,2})[-/.]?([0-9]{4})?( [0-9]{1,2}:[0-9]{2}:?[0-9]{0,2} ?(am|pm|gmt))?$/i,
      parse: (m) => {
        let month = parseInt(m[1], 10);
        let date = parseDate$1(m[2]);
        //support dd/mm/yyy
        // if (s.british || month >= 12) {
        //   date = parseInt(m[1], 10)
        //   month = parseInt(m[2], 10) - 1
        // }
        let obj = {
          date,
          month,
          year: parseYear$1(m[3])
        };
        // s = parseTime(s, m[4])
        return obj
      }
    },
    //alt short format - "feb-25-2015"
    {
      reg: /^([a-z]+)[-/. ]([0-9]{1,2})[-/. ]?([0-9]{4}|'[0-9]{2})?( [0-9]{1,2}(:[0-9]{0,2})?(:[0-9]{0,3})? ?(am|pm)?)?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[3]),
          month: parseMonth$1(m[1]),
          date: parseDate$1(m[2] || '')
        };
        obj = parseTime$1(m[4], obj);
        return obj
      }
    },

    //Long "Mar 25 2015"
    //February 22, 2017 15:30:00
    {
      reg: /^([a-z]+) ([0-9]{1,2})( [0-9]{4})?( ([0-9:]+( ?am| ?pm| ?gmt)?))?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[3]),
          month: parseMonth$1(m[1]),
          date: parseDate$1(m[2] || '')
        };
        obj = parseTime$1(m[4], obj);
        return obj
      }
    },
    // 'Sun Mar 14 15:09:48 +0000 2021'
    {
      reg: /^([a-z]+) ([0-9]{1,2})( [0-9:]+)?( \+[0-9]{4})?( [0-9]{4})?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[5]),
          month: parseMonth$1(m[1]),
          date: parseDate$1(m[2] || '')
        };
        obj = parseTime$1(m[4], obj);
        return obj
      }
    }
  ];

  var dmy = [
    // =====
    //  d-m-y
    // =====
    //common british format - "25-feb-2015"
    {
      reg: /^([0-9]{1,2})[-/]([a-z]+)[-/]?([0-9]{4})?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[3]),
          month: parseMonth$1(m[2]),
          date: parseDate$1(m[1] || '')
        };
        obj = parseTime$1(m[4], obj);
        return obj
      }
    },
    // "25 Mar 2015"
    {
      reg: /^([0-9]{1,2})( [a-z]+)( [0-9]{4}| '[0-9]{2})? ?([0-9]{1,2}:[0-9]{2}:?[0-9]{0,2} ?(am|pm|gmt))?$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[3]),
          month: parseMonth$1(m[2]),
          date: parseDate$1(m[1])
        };
        if (!obj.month) {
          return null
        }
        obj = parseTime$1(m[4], obj);
        return obj
      }
    },
    // 01-jan-2020
    {
      reg: /^([0-9]{1,2})[ /]([a-z]+)[ /]([0-9]{4})?( [0-9]{1,2}(:[0-9]{0,2})?(:[0-9]{0,3})? ?(am|pm)?)?$/i,
      parse: (m) => {
        let obj = {
          date: parseDate$1(m[1]),
          month: parseMonth$1(m[2]),
          year: parseYear$1(m[3])
        };
        obj = parseTime$1(m[4], obj);
        return obj
      }
    }
  ];

  var misc$1 = [
    // =====
    // no dates
    // =====

    // '2012-06' month-only
    {
      reg: /^([0-9]{4})[-/]([0-9]{2})$/,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[1]),
          month: parseInt(m[2], 10),
        };
        // s = parseTime(s, m[4])
        return obj
      }
    },

    //February 2017 (implied date)
    {
      reg: /^([a-z]+) ([0-9]{4})$/i,
      parse: (m) => {
        let obj = {
          year: parseYear$1(m[2]),
          month: parseMonth$1(m[1]),
        };
        // s = parseTime(s, m[4])
        return obj
      }
    },

    {
      // 'q2 2002'
      reg: /^(q[0-9])( of)?( [0-9]{4})?/i,
      parse: (m) => {
        m[1] || '';
        // TODO: 
        // s = s.quarter(quarter)
        if (m[3]) {
          let year = parseYear$1(m[3]);
          return { year }
        }
        return {}
      }
    },
    {
      // 'summer 2002'
      reg: /^(spring|summer|winter|fall|autumn)( of)?( [0-9]{4})?/i,
      parse: (m) => {
        m[1] || '';
        // TODO: 
        // s = s.season(season)
        if (m[3]) {
          let year = parseYear$1(m[3]);
          return { year }
        }
        return {}
      }
    },
    {
      // '200bc'
      reg: /^[0-9,]+ ?b\.?c\.?$/i,
      parse: (m) => {
        let str = m[0] || '';
        //make year-negative
        str = str.replace(/^([0-9,]+) ?b\.?c\.?$/i, '-$1').trim();
        let obj = {
          year: parseInt(str.trim(), 10),
        };
        return obj
      }
    },
    {
      // '200ad'
      reg: /^[0-9,]+ ?(a\.?d\.?|c\.?e\.?)$/i,
      parse: (m) => {
        let str = m[0] || '';
        //remove commas
        str = str.replace(/,/g, '');
        let obj = {
          year: parseInt(str.trim(), 10),
        };
        // s = parseTime(s)
        return obj
      }
    },
    {
      // '1992'
      reg: /^[0-9]{4}( ?a\.?d\.?)?$/i,
      parse: (m) => {
        // TODO: 
        // let today = s._today
        // using today's date, but a new month is awkward.
        // if (today.month && !today.date) {
        //   today.date = 1
        // }
        let obj = {
          year: parseYear$1(m[0]),
          // month: today.month || d.getMonth(),
          // date: today.date || d.getDate()
        };
        // s = parseTime(s)
        return obj
      }
    }
  ];

  var formats = [].concat(ymd, mdy, dmy, misc$1);

  // order for Array input
  const units$1 = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond'];

  const isObject = val => {
    return Object.prototype.toString.call(val) === '[object Object]'
  };

  const isArray = function (arr) {
    return Object.prototype.toString.call(arr) === '[object Array]'
  };

  const isString = val => {
    return typeof val === 'string'
  };


  const parseText = function (txt, tz) {
    let cal = {};
    // normalize it a bit first
    txt = txt.toLowerCase();
    txt = txt.replace(/([0-9])(th|rd|st|nd)\b/, '$1');
    txt = txt.replace(/\b(mon|tues?|wed|wednes|thur?s?|fri|sat|satur|sun)(day)?\b/i, '');
    txt = txt.replace(/,/g, '');
    txt = txt.replace(/ +/g, ' ').trim();
    txt = txt.trim();
    for (let i = 0; i < formats.length; i += 1) {
      let m = txt.match(formats[i].reg);
      if (m !== null) {
        // console.log(`reg #${i} - ${formats[i].reg}`)
        let res = formats[i].parse(m);
        if (res) {
          return res
        }
      }
    }
    return cal
  };

  const toCal = function (input, tz, world) {
    // support ordered array as input [2020, 04, 1] → {year:2020 ...}
    if (isArray(input)) {
      let cal = units$1.reduce((h, k, i) => {
        h[k] = input[i];
        return h
      }, {});
      if (cal.month) {
        cal.month = parseMonth$1(cal.month);
      }
      return cal
    }
    // object input - given {year:2020 ...}
    if (input && isObject(input)) {
      // interpret a spacetime object as input
      if (input.isSpacetime === true) {
        return input.clone()
      }
      let cal = Object.assign({}, input);//don't mutate original
      return cal
    }
    // pull-apart ISO formats, etc
    if (isString(input)) {
      let cal = parseText(input);
      // replace tz with iso timezone
      if (cal.offset !== null && cal.offset !== undefined) {
        if (cal.offset < 0) {
          `Etc/GMT+${Math.abs(cal.offset)}`;
        } else {
          `Etc/GMT-${cal.offset}`;
        }
      }
      return cal
    }
    return {}
  };
  var toCal$1 = toCal;

  const isValid = function (cal, tz, world) {
    // required fields
    if (!cal.year && !cal.year === 0) {
      return false
    }
    if (!cal.month || cal.month < 1 || cal.month > 12) {
      return false
    }
    if (!cal.date || cal.date < 1 || cal.date > 31) {
      return false
    }
    // non-required fields
    if (cal.hour && cal.hour < 0 && cal.hour > 24) {
      return false
    }
    if (cal.minute && cal.minute < 0 && cal.minute > 60) {
      return false
    }
    if (cal.second && cal.second < 0 && cal.second > 60) {
      return false
    }
    if (cal.millisecond && cal.millisecond < 0 && cal.millisecond > 1000) {
      return false
    }
    if (cal.offset && cal.offset < -14 && cal.offset > 14) {
      return false
    }
    return true
  };
  var isValid$1 = isValid;

  // import getEpoch from '../compute/epoch/index.js'


  const isNumber$1 = val => {
    return typeof val === 'number' && isFinite(val)
  };


  const parse = function (input, tz, world) {
    // reconcile timezone
    tz = world.methods.parseTz(tz, world);

    // null means now
    if (input === null || input === undefined) {
      return { epoch: world.methods.now(), tz }
    }
    // epoch input
    if (isNumber$1(input)) {
      // if the given epoch is really small, they've probably given seconds and not milliseconds
      if (world.config.minimumEpoch && input < world.config.minimumEpoch && input > 0) {
        input *= 1000;
      }
      return { epoch: input, tz }
    }

    let cal = toCal$1(input);
    // throw an error if input creates invalid date
    if (isValid$1(cal) === false && world.config.throwUnparsedDate) {
      console.error(`Error: invalid spacetime input: '${input}'`);
      throw new Error('InvalidDate');
    }

    // try to pull an tz off end of ISO-string
    if (!tz) {
      if (cal.offset || cal.offset === 0) {
        let isoTz = world.methods.parseTz(cal.offset, world);
        if (world.zones.hasOwnProperty(isoTz)) {
          tz = isoTz;
        }
      }
      tz = tz || world.methods.fallbackTz(world);
    }
    let epoch = world.methods.getEpoch(cal, tz, world);

    return { epoch, tz }

  };
  var parse$1 = parse;

  const isNumber = val => {
    return typeof val === 'number' && isFinite(val)
  };

  // this method is replaced in /two
  const parseTz$1 = function (input, world) {
    let { zones, config } = world;

    // shim-together a timezone from a numeric offset
    if (isNumber(input) === true) {
      let n = input;
      if (n === 0) {
        return 'Etc/GMT'
      }
      if (n < 0) {
        return `Etc/GMT+${Math.abs(n)}`//reversed
      }
      return `Etc/GMT${n * -1}`
    }

    if (input && zones.hasOwnProperty(input)) {
      return input
    }
    if (input === 'z' || input === 'Z') {
      return 'Etc/GMT'
    }
    if (config.throwUnknownTz) {
      console.error(`Unknown timezone: '${input}'`);
      throw new Error(`Spacetime: Unknown timezone`);
    }

    return null
  };
  var parseTz$2 = parseTz$1;

  const fallbackTz$2 = function (world) {
    // deduce computer timezone via getTimezoneOffset()?
    if (world.config.tryLocalTimezone) {
      const mins = new Date().getTimezoneOffset();// get (current) timezone offset from js Date
      let h = mins / 60;
      let name = `Etc/GMT${h * -1}`;
      if (world.zones.hasOwnProperty(name)) {
        return name
      }
    }
    return world.config.fallbackTz || null
  };
  var fallbackTz$3 = fallbackTz$2;

  // what is the offset on January 1st?
  const getOffset = function (tz, world) {
    const { HOUR } = world.model.ms;
    // apply timezone offset to it
    let zoneFile = world.zones;
    if (tz && zoneFile.hasOwnProperty(tz) && zoneFile[tz]) {
      let zone = zoneFile[tz];
      let offset = zone.offset || 0;
      // are we in DST on Jan 1st?
      // all 16 southern hemisphere zones w/ DST
      if (zone.hem === 's' && zone.dst) {
        offset += zone.change || 1;
      }
      return offset * HOUR
    }
    return 0
  };
  var getOffset$1 = getOffset;

  // const MAXOFFSET = -DAY * 2
  const memo = {};

  const utcStart = function (year, world) {
    const { YEAR, DAY } = world.model.ms;
    const isLeapYear = world.methods.isLeapYear;
    // try and compute this only once
    if (memo.hasOwnProperty(year)) {
      return memo[year]
    }
    let epoch = 0;
    // count up from 1970
    if (year > 1970) {
      for (let y = 1970; y < year; y += 1) {
        if (isLeapYear(y)) {
          epoch += YEAR + DAY;
        } else {
          epoch += YEAR;
        }
        memo[y + 1] = epoch;
      }
    } else {
      // count down from 1970
      let y = 1970;
      while (y > year) {
        y -= 1;
        if (isLeapYear(y)) {
          epoch -= YEAR + DAY;
        } else {
          epoch -= YEAR;
        }
        memo[y] = epoch;
      }
    }
    return epoch
  };



  // get UTC epoch for jan 1
  const yearStart = function (year, tz, world) {
    let epoch = utcStart(year, world);
    epoch -= getOffset$1(tz, world);
    return epoch
  };


  var yearStart$1 = yearStart;

  // from a random epoch, get it's Jan 1st alignment
  const getYear = function (target, tz, world) {
    const { YEAR, DAY } = world.model.ms;
    const MAXOFFSET = DAY * 2;
    let epoch = 0;
    const isLeapYear = world.methods.isLeapYear;
    // apply timezone offset to it
    epoch -= getOffset$1(tz, world);
    let year = 1970;
    // count upwards from 1970
    if (target > MAXOFFSET) {
      while (epoch <= target) {
        let size = YEAR;
        if (isLeapYear(year)) {
          size = YEAR + DAY;
        }
        let tmp = epoch + size;
        if (tmp > target) {
          break
        }
        epoch = tmp;
        year += 1;
      }
    } else {
      // count downwards from 1970
      while (epoch > target) {
        let size = YEAR;
        if (isLeapYear(year)) {
          size = YEAR + DAY;
        }
        epoch -= size;
        year -= 1;
      }
    }
    return { start: epoch, year }
  };
  var getYear$1 = getYear;

  // import isLeapYear from '../_lib/isLeap.js'
  // import { SECOND, MINUTE, HOUR } from '../_lib/millis.js'
  // import MONTHS from '../_lib/months.js'


  const getDate = function (diffDays, year, world) {
    const { months } = world.model;
    const { isLeapYear } = world.methods;
    const monthLengths = months.map(o => o.len);
    let res = { month: 1, date: 1 };
    let total = 0;
    for (let i = 0; i < months.length - 1; i += 1) {
      let inMonth = monthLengths[i];
      if (i === 1 && isLeapYear(year)) {
        inMonth = 29;
      }
      if (total + inMonth > diffDays) {
        break
      }
      total += inMonth;
      res.month += 1;
    }
    // add remainder to days
    res.date += diffDays - total;
    return res
  };

  const getTime = function (ms, world) {
    const { SECOND, MINUTE, HOUR } = world.model.ms;
    let res = { hour: 0, minute: 0, second: 0, millisecond: 0 };
    // get hour
    res.hour = Math.floor(ms / HOUR);
    ms -= res.hour * HOUR;
    // get minute
    res.minute = Math.floor(ms / MINUTE);
    ms -= res.minute * MINUTE;
    // get second
    res.second = Math.floor(ms / SECOND);
    ms -= res.second * SECOND;
    // remainder milliseconds
    res.millisecond = ms;
    return res
  };

  // take an epoch, return {month, year, date...}
  const computeCal = function (epoch, tz, world) {
    const { zones, model, methods } = world;
    const { getYear, dstChanges } = methods;
    const { DAY, HOUR } = model.ms;
    // get Jan 1 of the year
    let { start, year } = getYear(epoch, tz, world);
    let zone = zones[tz] || {};
    let cal = {
      year,
      month: 1,
      date: 1,
      hour: 0,
      second: 0,
      millisecond: 0,
      offset: zone.offset || 0
    };
    // kick the epoch around, according to our DST offset
    let changes = dstChanges(tz, year, world);
    if (zone.hem === 's') {
      // southern hemisphere
      for (let i = 0; i < changes.length; i += 1) {
        if (epoch < changes[i].epoch) {
          cal.offset = changes[i].offset;
          epoch -= changes[i].delta * HOUR;
          break
        }
      }
      cal.offset += 1;
    } else {
      // northern hemisphere
      for (let i = changes.length - 1; i >= 0; i -= 1) {
        if (epoch >= changes[i].epoch) {
          cal.offset = changes[i].offset;
          epoch += changes[i].delta * HOUR;
          break
        }
      }
    }
    // walk the days
    let diff = epoch - start;
    let daysDiff = Math.floor(diff / DAY);
    // compute month, date
    let resDate = getDate(daysDiff, year, world);
    Object.assign(cal, resDate);

    // compute hour, min, sec..
    let deltaMs = diff - (daysDiff * DAY);
    let resMins = getTime(deltaMs, world);
    Object.assign(cal, resMins);
    return cal
  };
  var getCal = computeCal;

  // import months from '../compute/_lib/months.js'
  // import isLeapYear from '../compute/_lib/isLeap.js'

  const isFloat = function (n) {
    return n !== undefined && Number(n) === n && n % 1 !== 0;
  };

  // ensure we haven't been given any silly numbers
  const validate = function (cal, world) {
    const isLeapYear = world.methods.isLeapYear;
    const months = world.model.months;
    Object.keys(cal).forEach(k => {
      // no decimals allowed
      if (isFloat(cal[k])) {
        cal[k] = parseInt(cal[k], 10);
      }
      // no negatives
      if (cal[k] < 0 && k !== 'year') {
        cal[k] = 0;
      }
    });

    // set defaults
    cal.month = cal.month || 1; //co-erce any zeros to 1s
    cal.date = cal.date || 1; // (same)
    cal.hour = cal.hour || 0;
    cal.minute = cal.minute || 0;
    cal.second = cal.second || 0;
    cal.millisecond = cal.millisecond || 0;

    // range maximums
    if (cal.month && cal.month > 12) {
      cal.month = 12;
    }
    if (cal.date && months[cal.month - 1] && cal.date > months[cal.month - 1].len) {
      // check leap
      if (cal.month === 2 && isLeapYear(cal.year)) {
        cal.date = 29;
      } else {
        cal.date = months[cal.month - 1].len;
      }
    }
    if (cal.hour && cal.hour > 24) {
      cal.month = 24;
    }
    if (cal.minute && cal.minute > 59) {
      cal.month = 59;
    }
    if (cal.second && cal.second > 59) {
      cal.second = 59;
    }
    if (cal.millisecond && cal.millisecond > 999) {
      cal.millisecond = 999;
    }
    return cal
  };
  var validate$1 = validate;

  // import { DAY, HOUR, MINUTE, SECOND } from '../_lib/millis.js'
  // import months from '../_lib/months.js'
  // import isLeap from '../_lib/isLeap.js'

  // compare two cal objects
  const ensureEqual = function (a, b) {
    const units = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond'];
    for (let i = 0; i < units.length; i += 1) {
      let unit = units[i];
      if (a[unit] !== b[unit]) {
        console.error('\n----\nMis-matched unit in walk:', unit); // eslint-disable-line
        console.error(a, '\n', b); // eslint-disable-line
        return false
      }
    }
    //it's the same
    return true
  };

  const diffDays = function (from, to, world) {
    const { isLeapYear } = world.methods;
    const { months } = world.model;
    let diff = 0;
    // increment months
    for (let n = from.month; n < to.month; n += 1) {
      // console.log(`+${months[n - 1].len} for ${months[n - 1].long}`)
      diff += months[n - 1].len;
      if (n === 2 && isLeapYear(from.year)) {
        diff += 1; //add another
      }
    }
    // delta days (can be negative)
    let days = to.date - from.date;
    diff += days;
    return diff
  };

  // step forward and count milliseconds 
  // until the two calendar objects meet
  const walk$1 = function (epoch, from, to, world) {
    const { DAY, HOUR, MINUTE, SECOND } = world.model.ms;
    // console.log(`from: ${from.year}-${from.month}-${from.date}`)
    // console.log(`  to: ${to.year}-${to.month}-${to.date}`)

    // increment months/days  (we are guaranteed to be in the same year)
    let diff = diffDays(from, to, world);
    epoch += diff * DAY;
    from.month = to.month;
    from.date = to.date;

    // add-up remaining hours
    diff = to.hour - from.hour;
    epoch += diff * HOUR;
    from.hour += diff;

    // remaining minutes
    diff = to.minute - from.minute;
    epoch += diff * MINUTE;
    from.minute += diff;

    // add-up remaining seconds
    diff = to.second - from.second;
    epoch += diff * SECOND;
    from.second += diff;

    // add-up remaining milliseconds
    diff = to.millisecond - from.millisecond;
    epoch += diff;
    from.millisecond += diff;

    // make sure we are complete
    ensureEqual(from, to);

    return epoch
  };
  var walk$2 = walk$1;

  const NEW_YEAR = {
    month: 1,
    date: 1,
    hour: 0,
    minute: 0,
    second: 0,
    millisecond: 0,
  };

  // compare two cal objects
  const isAfter = function (a, b) {
    const units = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond'];
    for (let i = 0; i < units.length; i += 1) {
      let unit = units[i];
      if (a[unit] > b[unit]) {
        return true
      }
      if (a[unit] < b[unit]) {
        return false
      }
    }
    //it's the same
    return true
  };

  const getEpoch$1 = function (cal, tz, world) {
    const { yearStart, dstChanges } = world.methods;
    // set secure defaults
    cal = validate$1(cal, world);

    // set our cal to Jan 1 of this year
    let epoch = yearStart(cal.year, tz, world);
    let have = Object.assign({}, NEW_YEAR, { year: cal.year });

    // consult any DST changes this year
    let changes = dstChanges(tz, cal.year, world).reverse();
    let change = changes.find(c => isAfter(cal, c.cal));
    if (change) {
      epoch = change.epoch;
      have = Object.assign({}, NEW_YEAR, change.cal, { year: cal.year });
    }
    // step-forward, by milliseconds
    epoch = walk$2(epoch, have, cal, world);

    return epoch
  };
  var getEpoch$2 = getEpoch$1;

  const dstChanges = () => [];

  var methods$3 = {
    // from https://www.timeanddate.com/date/leapyear.html
    isLeapYear: (year) => year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0),

    getDay: (cal) => getDay$1(cal.year, cal.month, cal.date),

    // parse input string into epoch
    parse: parse$1,

    // determine timezone
    parseTz: parseTz$2,
    fallbackTz: fallbackTz$3,

    yearStart: yearStart$1,
    getEpoch: getEpoch$2,
    dstChanges,
    getYear: getYear$1,
    getCal
  };

  let getter$1 = {
    year: (cal) => cal.year,
    month: (cal) => cal.month - 1,//javascript uses 0-based months!
    date: (cal) => cal.date,//1-based dates!
    hour: (cal) => cal.hour,
    minute: (cal) => cal.minute,
    second: (cal) => cal.second,
    millisecond: (cal) => cal.millisecond,
    ampm: (cal) => cal.hour < 12 ? 'am' : 'pm',
    decade: (cal) => Math.floor(cal.year / 10) * 10,//  eg '1970'
    century: (cal) => Math.floor(cal.year / 100) * 100,//  eg '1900'
    millenium: (cal) => {
      let num = Math.floor(cal.year / 1000);
      return num >= 0 ? num + 1 : num// millenia are 1-based, in AD
    },
    era: (cal) => cal.year < 0 ? 'BC' : 'AD',
    quarter: (cal) => {
      let m = cal.month;
      if (m < 3) {
        return 1
      } else if (m < 6) {
        return 2
      } else if (m < 9) {
        return 3
      }
      return 4
    },
    hour12: (cal) => {
      let hour = cal.hour;
      if (hour > 12) {
        return hour - 12
      }
      if (hour === 0) {
        return 12
      }
      return hour
    },
    hourFloat: (cal) => {
      let minute = cal.minute;
      minute = minute / 60;
      return cal.hour + minute
    }
  };

  var getters = getter$1;

  let fns = {
    year: (input, cal) => {
      cal.year = parseYear$1(input);
      return cal
    },
    month: (input, cal) => {
      cal.month = parseMonth$1(input);
      return cal
    },
    date: (input, cal) => {
      cal.date = parseDate$1(input);
      return cal
    },
    hour: (input, cal) => {
      cal.hour = parseHour$1(input);
      return cal
    },
    minute: (input, cal) => {
      cal.minute = Number(input);
      return cal
    },
    second: (input, cal) => {
      cal.second = Number(input);
      return cal
    },
    millisecond: (input, cal) => {
      cal.millisecond = Number(input);
      return cal
    },
    time: (input, cal) => {
      return Object.assign(cal, parseTime$1(input))
    },
    hourFloat: (input, cal) => {
      input = Number(input);
      cal.hour = Math.floor(input);
      cal.minute = Math.floor((input % 1) * 60);// (0.25 -> 15)
      return cal
    },
    quarter: (input, cal) => {
      cal = Object.assign(cal, { date: 1, hour: 0, minute: 0, second: 0, millisecond: 0 });
      if (input === 1) {
        cal.month = 1;//jan 1
      } else if (input === 2) {
        cal.month = 3;//apr 1
      } else if (input === 3) {
        cal.month = 6;//july 1
      } else if (input === 4) {
        cal.month = 9;//oct 1
      }
      cal.date = 1;
      return cal
    },
    season: (input, cal) => {
    },
    dayTime: (input, cal) => {
    },
    ampm: (input, cal) => {
      let h = cal.hour;
      let val = parseAmpm(input);
      if (val === 'am') {
        h = h > 12 ? h - 12 : h;
      } else if (val === 'pm') {
        h = h < 12 ? h + 12 : h;
      }
      cal.hour = h;
      return cal
    },
    era: (input, cal) => {
      input = input.toLowerCase().replace(/\./g, '').trim();
      if (input === 'bc' && cal.year > 0) {
        cal.year *= -1;
      }
      return cal
    },

    // decade: (cal) => Math.floor(cal.year / 10) * 10,//  eg '1970'
    // century: (cal) => Math.floor(cal.year / 100) * 100,//  eg '1900'
    // millenium: (cal) => {
    //   let num = Math.floor(cal.year / 1000)
    //   return num >= 0 ? num + 1 : num// millenia are 1-based, in AD
    // },
    // eg '1970'
    decade: function (input, cal) {
      let r = cal.year % 10;
      cal.year = Number(input) + r;
      return cal
    },
    // eg '1900'
    century: function (input, cal) {
      let r = cal.year % 100;
      cal.year = Number(input) + r;
      return cal
    },
    // eg 1
    millenium: function (input, cal) {
      let r = cal.year % 1000;
      let m = Number(input) - 1;
      cal.year = (m * 1000) + r;
      return cal
    },



  };
  fns.monthName = fns.month;
  fns.dayName = fns.day;
  fns.hour12 = fns.hour;
  var setters = fns;

  function titleCase(str) {
    if (!str) {
      return ''
    }
    return str[0].toUpperCase() + str.substr(1)
  }

  function ordinal(i) {
    let j = i % 10;
    let k = i % 100;
    if (j === 1 && k !== 11) {
      return i + 'st'
    }
    if (j === 2 && k !== 12) {
      return i + 'nd'
    }
    if (j === 3 && k !== 13) {
      return i + 'rd'
    }
    return i + 'th'
  }

  function zeroPad(str, len = 2) {
    let pad = '0';
    str = str + '';
    return str.length >= len ? str : new Array(len - str.length + 1).join(pad) + str
  }

  // import g from '../getter/index.js'

  const fmt = {

    day: (s) => titleCase(s.dayName()),
    'day-short': (s) => titleCase(s.world.model.days[s.day()].short),
    'day-number': (s) => s.day(),
    'day-ordinal': (s) => ordinal(s.day()),
    date: (s) => s.date(),
    'date-ordinal': (s) => ordinal(s.date()),
    month: (s) => titleCase(s.monthName()),
    'month-short': (s) => titleCase(s.world.model.months[s.month()].short),
    'month-number': (s) => s.month(),
    'month-ordinal': (s) => ordinal(s.month()),
    'iso-month': (s) => zeroPad(s.month() + 1), //1-based months
    year: (s) => {
      let y = s.year();
      return y > 0 ? y : `${Math.abs(y)} BC`
    },
    'year-short': (s) => {
      let y = s.year();
      return y > 0 ? `'${String(y).substring(2, 4)}` : Math.abs(y) + ' BC'
    },
    'iso-year': (s) => {
      let y = s.year();
      let str = zeroPad(Math.abs(y), 4); //0-padded
      if (y < 0) {
        str = '-' + zeroPad(str, 6);  //negative years are for some reason 6-digits ('-00008')
      }
      return str
    },

    // time: (s) => s.time(),
    'time-24': (s) => `${zeroPad(s.hour24())}:${zeroPad(s.minute())}`,

    hour: (s) => s.hour12(),
    'hour-24': (s) => s.hour24(),
    minute: (s) => s.minute(),
    second: (s) => s.second(),
    ms: (s) => s.millisecond(),
    millisecond: (s) => s.millisecond(),
    'millisecond-pad': (s) => zeroPad(s.millisecond(), 3),

    ampm: (s) => s.ampm(),
    AMPM: (s) => s.ampm().toUpperCase(),
    quarter: (s) => 'Q' + s.quarter(),

    // turn timezone 5.25 into '+05:15'
    offset: (s) => {
      let n = s.offset() || 0;
      if (n === 0) {
        return 'Z'
      }
      let out = n <= 0 ? '-' : '+';
      n = Math.abs(n);
      // add hour
      let h = parseInt(n, 10);
      out += String(h).padStart(2, '0');
      // add minute
      let decimal = n % 1;
      if (decimal) {
        let min = decimal * 60;
        out += ':' + String(min).padStart(2, '0');
      } else {
        out += ':00';
      }
      return out
    }
  };
  // compound ones
  fmt['iso-short'] = (s) => `${fmt['iso-year'](s)}-${fmt['iso-month'](s)}-${zeroPad(s.date())}`;
  fmt['iso-medium'] = (s) => `${fmt['iso-short'](s)}T${zeroPad(s.hour())}:${zeroPad(s.minute())}:${zeroPad(s.second())}.${zeroPad(s.millisecond(), 3)}`;
  fmt['iso'] = (c) => `${fmt['iso-medium'](c)}${fmt.offset(c)}`;
  //i made these up
  fmt['nice'] = (s) => `${fmt['month-short'](s)} ${fmt['date-ordinal'](s)}, ${fmt['time'](s)}`;
  fmt['nice-day'] = (s) => `${fmt['day-short'](s)} ${fmt['month-short'](s)} ${fmt['date-ordinal'](s)}`;

  // aliases
  const aliases = {
    'hour-12': 'hour',
    'day-name': 'day',
    'month-name': 'month',
    'iso 8601': 'iso',
    'time-h24': 'time-24',
    'time-12': 'time',
    'time-h12': 'time',
    tz: 'timezone',
    'day-num': 'day-number',
    'month-num': 'month-number',
    'month-iso': 'iso-month',
    'year-iso': 'iso-year',
    'nice-short': 'nice',
    'nice-short-24': 'nice-24',
    mdy: 'numeric-us',
    dmy: 'numeric-uk',
    ymd: 'numeric',
    'yyyy/mm/dd': 'numeric',
    'mm/dd/yyyy': 'numeric-us',
    'dd/mm/yyyy': 'numeric-us',
    'little-endian': 'numeric-uk',
    'big-endian': 'numeric',
    'day-nice': 'nice-day',
  };
  let pads = ['day', 'date', 'month', 'hour', 'minute', 'second', 'hour-24', 'hour-12'];
  pads.forEach(k => {
    fmt[k + '-pad'] = (c) => zeroPad(fmt[k](c));
  });
  Object.keys(aliases).forEach((k) => (fmt[k] = fmt[aliases[k]]));

  var fmts$1 = fmt;

  // import getEpoch from '../../compute/epoch/index.js'

  // import { formatTimezone } from '../../fns.js'
  //parse this insane unix-time-templating thing, from the 19th century
  //http://unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns

  //time-symbols we support
  const mapping$1 = {
    G: (c) => getters.era(c),
    GG: (c) => getters.era(c),
    GGG: (c) => getters.era(c),
    GGGG: (c) => (getters.era(c) === 'AD' ? 'Anno Domini' : 'Before Christ'),
    //year
    y: (c) => c.year,
    yy: (c) => zeroPad(Number(String(c.year).substring(2, 4))), //last two chars
    yyy: (c) => c.year,
    yyyy: (c) => c.year,
    yyyyy: (c) => '0' + c.year,
    // u: (c) => {},//extended non-gregorian years

    //quarter
    Q: (c) => getters.quarter(c),
    QQ: (c) => getters.quarter(c),
    QQQ: (c) => getters.quarter(c),
    QQQQ: (c) => getters.quarter(c),

    //month
    M: (c) => c.month,
    MM: (c) => zeroPad(c.month),
    MMM: (c) => fmts$1['month-short'](c),
    MMMM: (c, _tz, world) => titleCase(getters.monthName(c, _tz, world)),

    //week
    w: (c) => getters.week(c),
    ww: (c) => zeroPad(getters.week(c)),
    //week of month
    // W: (c) => s.week(),

    //date of month
    d: (c) => c.date,
    dd: (c) => zeroPad(c.date),
    //date of year
    D: (c) => getters.dayOfYear(c),
    DD: (c) => zeroPad(getters.dayOfYear(c)),
    DDD: (c) => zeroPad(getters.dayOfYear(c), 3),

    // F: (c) => {},//date of week in month
    // g: (c) => {},//modified julian day

    //day
    E: (c) => fmts$1['day-short'](c),
    EE: (c) => fmts$1['day-short'](c),
    EEE: (c) => fmts$1['day-short'](c),
    EEEE: (c) => fmts$1['day'](c),
    EEEEE: (c) => fmts$1['day'](c)[0],
    e: (c) => fmts$1['day'](c),
    ee: (c) => fmts$1['day'](c),
    eee: (c) => fmts$1['day-short'](c),
    eeee: (c) => fmts$1['day'](c),
    eeeee: (c) => fmts$1['day'](c)[0],

    //am/pm
    a: (c) => getters.ampm(c).toUpperCase(),
    aa: (c) => getters.ampm(c).toUpperCase(),
    aaa: (c) => getters.ampm(c).toUpperCase(),
    aaaa: (c) => getters.ampm(c).toUpperCase(),

    //hour
    h: (c) => getters.hour12(c),
    hh: (c) => zeroPad(getters.hour12(c)),
    H: (c) => c.hour,
    HH: (c) => zeroPad(c.hour),
    // j: (c) => {},//weird hour format

    m: (c) => c.minute,
    mm: (c) => zeroPad(c.minute),
    s: (c) => c.second,
    ss: (c) => zeroPad(c.second),

    //milliseconds
    SSS: (c) => zeroPad(c.millisecond, 3),
    //milliseconds into the day
    A: (c, tz, world) => {
      let morn = Object.assign({}, c, { hour: 0, minute: 0, second: 0, millisecond: 0 });
      return getEpoch(c) - getEpoch(morn, tz, world)
    },
    //timezone
    z: (_, tz) => tz,
    zz: (_, tz) => tz,
    zzz: (_, tz) => tz,
    zzzz: (_, tz) => tz,
    Z: (c) => fmts$1.offset(c).replace(/:/, ''),
    ZZ: (c) => fmts$1.offset(c).replace(/:/, ''),
    ZZZ: (c) => fmts$1.offset(c).replace(/:/, ''),
    ZZZZ: (c) => fmts$1.offset(c)
  };

  const addAlias = (char, to, n) => {
    let name = char;
    let toName = to;
    for (let i = 0; i < n; i += 1) {
      mapping$1[name] = mapping$1[toName];
      name += char;
      toName += to;
    }
  };
  addAlias('q', 'Q', 4);
  addAlias('L', 'M', 4);
  addAlias('Y', 'y', 4);
  addAlias('c', 'e', 4);
  addAlias('k', 'H', 2);
  addAlias('K', 'h', 2);
  addAlias('S', 's', 2);
  addAlias('v', 'z', 4);
  addAlias('V', 'Z', 4);

  // support unix-style escaping with ' character
  const escapeChars = function (arr) {
    for (let i = 0; i < arr.length; i += 1) {
      if (arr[i] === `'`) {
        // greedy-search for next apostrophe
        for (let o = i + 1; o < arr.length; o += 1) {
          if (arr[o]) {
            arr[i] += arr[o];
          }
          if (arr[o] === `'`) {
            arr[o] = null;
            break
          }
          arr[o] = null;
        }
      }
    }
    return arr.filter((ch) => ch)
  };

  //combine consecutive chars, like 'yyyy' as one.
  const combineRepeated = function (arr) {
    for (let i = 0; i < arr.length; i += 1) {
      let c = arr[i];
      // greedy-forward
      for (let o = i + 1; o < arr.length; o += 1) {
        if (arr[o] === c) {
          arr[i] += arr[o];
          arr[o] = null;
        } else {
          break
        }
      }
    }
    // '' means one apostrophe
    arr = arr.filter((ch) => ch);
    arr = arr.map((str) => {
      if (str === `''`) {
        str = `'`;
      }
      return str
    });
    return arr
  };

  const unixFmt = (cal, str, tz, world) => {
    let arr = str.split('');
    // support character escaping
    arr = escapeChars(arr);
    //combine 'yyyy' as string.
    arr = combineRepeated(arr);
    return arr.reduce((txt, c) => {
      if (mapping$1[c] !== undefined) {
        txt += mapping$1[c](cal, tz, world) || '';
      } else {
        // 'unescape'
        if (/^'.+'$/.test(c)) {
          c = c.replace(/'/g, '');
        }
        txt += c;
      }
      return txt
    }, '')
  };
  var unixFmt$1 = unixFmt;

  const multiReplace = function (s, str) {
    let sections = /\{(.+?)\}/g;
    str = str.replace(sections, (_, name) => {
      name = name.toLowerCase().trim();
      if (fmts$1.hasOwnProperty(name)) {
        return fmts$1[name](s)
      }
      return `{${name}}`
    });
    return str
  };

  let methods$2 = {
    format: function (fmt = 'iso-short') {
      const { epoch, tz, world } = this;
      world.methods.getCal;
      // let cal = getCal(epoch, tz, world)
      if (fmt && fmts$1.hasOwnProperty(fmt)) {
        return fmts$1[fmt](this)
      }
      return multiReplace(this, fmt)
    },
    unixFmt: function (fmt) {
      const { epoch, tz, world } = this;
      const getCal = world.methods.getCal;
      let cal = getCal(epoch, tz, world);
      return unixFmt$1(cal, fmt, tz, world)
    },
    iso: function () {
      return this.format('iso')
    }
  };

  // add extra wrappers for format methods
  // let diriv = ['iso']
  // diriv.forEach(fn => {
  //   methods[fn] = function () {
  //     const getCal = this.methods.getCal
  //     let cal = getCal(this.epoch, this.tz)
  //     return fmts[fn](cal)
  //   }
  // })

  var fmts = methods$2;

  const mapping = {
    milliseconds: 'millisecond',
    ms: 'millisecond',
    seconds: 'second',
    s: 'second',
    minutes: 'minute',
    min: 'minute',
    mins: 'minute',
    hours: 'hour',
    h: 'hour',
    hr: 'hour',
    dates: 'date',
    day: 'date',
    days: 'date',
    months: 'month',
    years: 'year',
    quarters: 'quarter',
    centuries: 'century',
    millenia: 'millenium',
  };
  const order = [
    'millenium',
    'century',
    'decade',
    'year',
    'quarter',
    'month',
    'week',
    'date',
    'hour',
    'minute',
    'second',
    'millisecond',
  ];
  const isKnown = new Set(order);

  const getUnit = function (input = '') {
    if (typeof input !== 'string') {
      input = String(input);
    }
    input = input.toLowerCase().trim();
    if (mapping.hasOwnProperty(input)) {
      input = mapping[input];
    }
    if (isKnown.has(input)) {
      return input
    }
    console.error(`Unknown unit: '${input}'`);
    return null
  };

  // import monthLen from '../../compute/_lib/monthLen.js'

  let assumed = {
    month: 1, //co-erce any zeros to 1s
    date: 1, // (same)
    hour: 0,
    minute: 0,
    second: 0,
    millisecond: 0,
  };

  const rollDays = function (cal, world) {
    const { monthLen } = world.methods;
    let len = monthLen(cal.month, cal.year);
    while (cal.date > len) {
      cal.date -= len;
      cal.month += 1;
      if (cal.month > 12) {
        cal.year += Math.floor(cal.month / 12);
        cal.month = cal.month % 12;
      }
      len = monthLen(cal.month, cal.year);
    }
    return cal
  };

  const rollFwd = function (cal, world) {
    const { monthLen } = world.methods;
    // if (cal.millisecond > 999) {
    //   cal.second += Math.floor(cal.millisecond / 1000)
    //   cal.millisecond = cal.millisecond % 1000
    // }
    // // second
    // if (cal.second > 59) {
    //   cal.minute += Math.floor(cal.second / 60)
    //   cal.second = cal.second % 60
    // }
    // // minute
    // if (cal.minute > 59) {
    //   cal.hour += Math.floor(cal.minute / 60)
    //   cal.minute = cal.minute % 60
    // }
    // hour (1-based)
    // if (cal.hour > 24) {
    //   cal.date += Math.floor(cal.hour / 24)
    //   cal.hour = cal.hour % 24
    // }
    // resolve the month, first
    if (cal.month > 12) {
      cal.year += Math.floor(cal.month / 12);
      cal.month = cal.month % 12;
      // cal.month += 1//one-based
    }
    // now we can do the date+month
    let len = monthLen(cal.month, cal.year);
    if (cal.date > len) {
      cal = rollDays(cal, world);
    }
    return cal
  };

  const rollBkwd = function (cal, world) {
    const { monthLen } = world.methods;
    // fix negative months
    while (cal.month < 1) {
      cal.year -= 1;
      cal.month += 12;
    }
    while (cal.date < 1) {
      cal.month -= 1;
      if (cal.month < 1) {
        cal.year -= 1;
        cal.month += 12;
      }
      let len = monthLen(cal.month, cal.year);
      cal.date += len;
    }
    // return cal
    return cal
  };

  // do a calendar-walk
  const walk = function (cal, n, unit, world) {
    cal = Object.assign({}, assumed, cal);
    unit = getUnit(unit);
    cal[unit] += n;
    // roll backward
    cal = rollBkwd(cal, world);
    // roll forward
    cal = rollFwd(cal, world);
    return cal
  };
  var tickBy = walk;

  // console.log(walk({ year: 2019, month: 4, date: 4 }))

  var add$1 = {

    add: function (n, unit) {
      let { epoch, tz, world } = this;
      const { getCal, getEpoch } = this.methods;
      const units = world.model.ms;
      // let epoch = add(this.epoch, n, unit)
      if (n === 0 || !unit) {
        return this._from(epoch, tz)
      }
      unit = getUnit(unit);
      // millisecond-math for these units
      if (units.hasOwnProperty(unit)) {
        let ms = units[unit];      // how many milliseconds are we adding?
        epoch += ms * n;
        return this._from(epoch, tz)
      }
      // misc units
      if (unit === 'week' || unit === 'weeks') {
        n *= 7;
        unit = 'day';
      }
      if (unit === 'quarter' || unit === 'quarters') {
        n *= 3;
        unit = 'month';
      }
      if (unit === 'decade' || unit === 'decades') {
        n *= 10;
        unit = 'year';
      }
      if (unit === 'century' || unit === 'centuries') {
        n *= 100;
        unit = 'year';
      }
      // add a 'tick' unit
      let cal = getCal(epoch, tz);
      cal = tickBy(cal, n, unit, world);
      let e = getEpoch(cal, tz, world);
      return this._from(e, tz)
    },

    subtract: function (n, unit) {
      return this.add(n * -1, unit)
    },
  };

  //make a string, for easy comparison between dates
  const print = {
    millisecond: (s) => s.epoch,
    second: (s) => [print.minute(s), s.second()].join('-'),
    minute: (s) => [print.hour(s), s.minute()].join('-'),
    hour: (s) => [print.date(s), s.hour()].join('-'),
    date: (s) => [print.month(s), s.date()].join('-'),
    month: (s) => [print.year(s), s.month()].join('-'),
    year: (s) => s.year(),
    // misc ones
    week: (s) => [s.year(), s.week()].join('-'),
    quarter: (s) => [s.year(), s.quarter()].join('-'),
    season: (s) => [s.year(), s.season()].join('-'),
    decade: (s) => s.decade(),
    century: (s) => s.century(),
  };

  var compare = {
    isSame: function (b, unit) {
      unit = getUnit(unit);
      b = this._from(b);
      return print[unit](this) === print[unit](b)
    },
    isBefore: function (b) {
      b = this._from(b);
      return this.epoch < b.epoch
    },
    isAfter: function (b) {
      b = this._from(b);
      return this.epoch > b.epoch
    },
    isEqual: function (b) {
      b = this._from(b);
      return this.epoch === b.epoch
    },
    isBetween: function (start, end, isInclusive = false) {
      start = this._from(start);
      end = this._from(end);
      let inside = this.epoch > start.epoch && this.epoch < end.epoch;
      if (!inside && isInclusive) {
        return this.epoch === start.epoch || this.epoch === end.epoch
      }
      return inside
    },
    every: function (unit, end) {
      unit = getUnit(unit);
      end = this._from(end);
      let result = [];
      let d = this.clone();
      while (d.isBefore(end)) {
        result.push(d);
        d = d.add(1, unit);
      }
      return result
    },
    // round up or down on this unit
    nearest: function (unit) {
      unit = getUnit(unit);
      let before = this.startOf(unit);
      let next = this.next(unit);
      let diffDown = this.epoch - before.epoch;
      let diffUp = Math.abs(this.epoch - next.epoch);
      if (diffUp > diffDown) {
        return before// go up
      }
      return next
    },

  };

  //increment until dates are the same
  const climb = (a, b, unit) => {
    // do fast-mode for these units
    if (unit === 'milliseconds') {
      return b.epoch - a.epoch
    }
    if (unit === 'seconds') {
      return Math.floor((b.epoch - a.epoch) / 1000)
    }
    if (unit === 'minutes') {
      return Math.floor((b.epoch - a.epoch) / (1000 * 60))
    }

    // slow-mode for these units
    let n = 0;
    while (a.isBefore(b)) {
      //do proper, expensive increment to catch all-the-tricks
      a = a.add(1, unit);
      n += 1;
    }
    //oops, we went too-far..
    if (a.isAfter(b, unit)) {
      n -= 1;
    }
    return n
  };

  // do a thurough +=1 on the unit, until they match
  // for speed-reasons, only used on day, month, week.
  const diffOne = (a, b, unit) => {
    if (a.isBefore(b)) {
      return climb(a, b, unit)
    } else {
      return climb(b, a, unit) * -1 //reverse it
    }
  };

  var diffOne$1 = diffOne;

  const units = [
    'milliseconds',
    'seconds',
    'minutes',
    'hours',
    'days',
    'months',
    'years',
    // 'quarters',
    // 'weeks',
  ];

  var diff = {
    // 
    diff: function (b, unit) {
      b = this._from(b);
      if (unit) {
        unit = getUnit(unit);
        return diffOne$1(this, b, unit)
      }
      return units.reduce((h, u) => {
        h[u] = diffOne$1(this, b, u);
        return h
      }, {})
    },
    since: function (b, unit) {
      unit = getUnit(unit);
      return {}
    }
  };

  // import getCal from '../compute/cal/index.js'
  // import getEpoch from '../compute/epoch/index.js'


  const add = (a, b) => Object.assign({}, a, b);

  // which zeros to cascade, for 'start of hour', etc.
  let z = { millisecond: {} };
  z.second = add(z.millisecond, { millisecond: 0 });
  z.minute = add(z.second, { second: 0 });
  z.hour = add(z.minute, { minute: 0 });
  z.date = add(z.hour, { hour: 0 });
  z.month = add(z.date, { date: 1 });
  z.year = add(z.month, { month: 1 });

  const roundYear = (c, by) => {
    c.year = Math.floor(c.year / by) * by;
    return c
  };

  const startMisc = {
    quarterHour: (c) => {
      let m = c.minute;
      if (m >= 45) {
        c.minute = 45;
      } else if (m >= 30) {
        c.minute = 30;
      } else if (m >= 15) {
        c.minute = 15;
      } else {
        c.minute = 0;
      }
      return Object.assign(c, { millisecond: 0, second: 0 })
    },
    decade: (c) => roundYear(c, 10),
    century: (c) => roundYear(c, 100),
    millenium: (c) => roundYear(c, 1000)
  };

  var startOf = {
    startOf: function (unit) {
      const { getCal, getEpoch } = this.methods;
      unit = getUnit(unit);
      let cal = getCal(this.epoch, this.tz);
      if (z.hasOwnProperty(unit)) {
        cal = Object.assign(cal, z[unit]);
      } else if (startMisc.hasOwnProperty(unit)) {
        cal = startMisc[unit](cal);
      }
      // this one is tricky
      if (unit === 'week') {
        let s = this.day(this.world.config.weekStart);
        s = s.startOf('day');
        cal = getCal(s.epoch, s.tz);
      }
      let epoch = getEpoch(cal, this.tz, this.world);
      return this._from(epoch)
    },
    next: function (unit) {
      unit = getUnit(unit);
      let s = this.startOf(unit);
      return s.add(1, unit)
    },
    last: function (unit) {
      unit = getUnit(unit);
      let s = this.startOf(unit);
      return s.minus(1, unit)
    },
    endOf: function (unit) {
      unit = getUnit(unit);
      let s = this.next(unit);  // go to next one, step back 1ms
      s = s.subtract(1, 'millisecond');
      return s
    },
    progress: function (unit) {
      return {}
    }
  };

  const getter = {
    week: (s) => {
      let start = s.startOf('year').startOf('week');
      return start.diff(s, 'week')
    },
    dayOfYear: (s) => {
      let start = s.startOf('year');
      return start.diff(s, 'day')
    }
  };

  const setter = {
    week: (s, input) => {
      let d = s.startOf('year').startOf('week');
      return d.add(input, 'week')
    },
    dayOfYear: (s, input) => {
      let d = s.startOf('year');
      return d.add(input, 'day')
    }
  };

  var misc = {


    // this one is tricky!
    day: function (input, fwd) {
      const { epoch, tz, world } = this;
      const { getDay, getCal } = world.methods;
      let cal = world.methods.getCal(epoch, tz, world);
      if (input !== undefined) {
        let day = getDay(cal.year, cal.month, cal.date);
        if (day === input) {
          return cal
        }
        let diff = input - day;
        // go in a specific direction
        if (diff < 0 && fwd === true) {
          diff = 7 + diff;
        } else if (diff > 0 && fwd === false) {
          diff = diff - 7;
        }
        return tick(cal, diff, 'date')
      }
      return world.methods.getDay(cal)
    },
    // wednesday/friday
    dayName: function (input) {
      const { world } = this;
      let n = this.day();
      return world.model.days[n].long
    },
    monthName: (input) => {
      const { world } = undefined;
      let n = undefined.day();
      return world.model.months[n].long
    },
    week: function (input) {
      if (input !== undefined) {
        return setter.week(this, input)
      }
      return getter.week(this)
    },

    dayOfYear: function (input) {
      if (input !== undefined) {
        let s = this.startOf('year');
        return s.add(input, 'day')
      }
      return getter.dayOfYear(this)
    },
    daysInMonth: function () {
      const monthLen = this.methods.monthLen;
      return monthLen(this.month() + 1, this.year())
    },
    isLeapYear: function () {
      const isLeapYear = this.methods.isLeapYear;
      return isLeapYear(this.year())
    },
    timezone: function () {
      return {
        name: this.tz,
        // hasDst: true,
        // default_offset: -4,
        // hemisphere: 'North',
        // current: { offset: -5, isDST: false },
        // change: { start: '03/12:02', back: '11/05:02' }
      }
    }
  };

  let methods$1 = {};

  // generate all getter / setter function pairs
  Object.keys(getters).forEach(fn => {
    if (!setters[fn]) {
      console.error('no-setter:', fn);
    }
    methods$1[fn] = function (input, dir) {
      let { epoch, tz, world } = this;
      let cal = world.methods.getCal(epoch, tz, world);
      // setter method
      if (input !== undefined) {
        let c = setters[fn](input, cal, tz, dir);
        let e = world.methods.getEpoch(c, tz, world);
        return this._from(e, tz)
      }
      // getter method
      return getters[fn](cal, tz, world)
    };
  });

  // add format methods
  Object.assign(methods$1, add$1, fmts, compare, startOf, misc, diff);

  methods$1.time = function (input) {
    if (input !== undefined) {
      let { epoch, tz, world } = this;
      let cal = world.methods.getCal(epoch, tz);
      let c = setters.time(input, cal, tz);
      let e = world.methods.getEpoch(c, tz, this.world);
      return this._from(e, tz)
    }
    return `${this.hour()}:${zeroPad(this.minute())}${this.ampm()}`
  };

  methods$1.clone = function () {
    return this._from(this.epoch, this.tz)
  };

  methods$1.isValid = () => true;

  methods$1.hasDst = function () {
    let { tz, world } = this;
    return world.zones[tz].dst
  };
  methods$1.isAsleep = function () {
    return false
  };
  methods$1.offset = function () {
    let { epoch, tz, world } = this;
    let cal = world.methods.getCal(epoch, tz, world);
    return cal.offset
  };
  methods$1.inDst = function () {
    let { epoch, tz, world } = this;
    const { getCal, dstChanges } = world.methods;
    // if it doesn't have dst
    if (!this.hasDst()) {
      return false
    }
    let cal = getCal(epoch, tz);
    dstChanges(tz, cal.year, world);
    // console.log(res)
    return true
  };

  methods$1.json = function () {
    let { epoch, tz, world } = this;
    const { getCal, dstChanges } = world.methods;
    let out = getCal(epoch, tz);
    out.epoch = epoch;
    out.tz = tz;
    let z = world.zones[tz] || {};
    out.hem = z.hem;
    out.abbrevs = z.shrt;
    out.dst = dstChanges(tz, out.year);
    return out
  };
  // aliases
  methods$1.fmt = methods$1.format;
  methods$1.text = methods$1.format;
  // methods.leapYear = methods.isLeapYear
  // methods.isLeap = methods.isLeapYear
  methods$1.inDST = methods$1.inDst;
  methods$1.hasDST = methods$1.hasDst;

  var api$3 = methods$1;

  lib$1.plugin({
    model,
    config: config$1,
    zones: zones$4,
    methods: methods$3,
    api: api$3
  });

  var api$2 = {
    //luxon: keepCalendarTime,  keepLocalTime
    goto: function (tz, opts = {}) {
      // if (opts.keepClock === true) { }
      return this._from(this.epoch, tz)
    }
  };

  var goto = {
    api: api$2
  };

  var pckd = `Africa
	Abidjan,0,GMT
	Accra,0,GMT
	Addis_Ababa,3,EAT
	Algiers,1,CET|CEST
	Asmara,3,EAT
	Bamako,0,GMT
	Bangui,1,WAT
	Banjul,0,GMT
	Bissau,0,GMT
	Blantyre,2,CAT,s
	Brazzaville,1,WAT
	Bujumbura,2,CAT,s
	Cairo,2,EET|EEST
	Casablanca,0,WET|WEST,saha
	Ceuta,1,CET|CEST,eu2
	Conakry,0,GMT
	Dakar,0,GMT
	Dar_Es_Salaam,3,EAT
	Djibouti,3,EAT
	Douala,1,WAT
	El_Aaiun,0,WET|WEST,saha
	Freetown,0,GMT
	Gaborone,2,CAT,s
	Harare,2,CAT,s
	Johannesburg,2,SAST,s
	Juba,3,CAT
	Kampala,3,EAT
	Khartoum,2,CAT
	Kigali,2,CAT,s
	Kinshasa,1,WAT
	Lagos,1,WAT
	Libreville,1,WAT
	Lome,0,GMT
	Luanda,1,WAT
	Lubumbashi,2,CAT,s
	Lusaka,2,CAT,s
	Malabo,1,WAT
	Maputo,2,CAT,s
	Maseru,2,SAST,s
	Mbabane,2,SAST,s
	Mogadishu,3,EAT
	Monrovia,0,GMT
	Nairobi,3,EAT
	Ndjamena,1,WAT
	Niamey,1,WAT
	Nouakchott,0,GMT
	Ouagadougou,0,GMT
	Porto-novo,1,WAT
	Sao_Tome,0,GMT
	Tripoli,2,EET|EEST
	Tunis,1,CET|CEST
	Windhoek,1,CAT,s
America
	Adak,-10,HST|HDT,usa
	Anchorage,-9,AKST|AKDT,usa
	Anguilla,-4,AST|ADT
	Antigua,-4,AST|ADT
	Araguaina,-3,BRT
	Argentina,-3,ART,s
	Argentina/Buenos_Aires,-3,ART,s
	Argentina/Catamarca,-3,ART,s
	Argentina/Cordoba,-3,ART,s
	Argentina/La_Rioja,-3,ART,s
	Argentina/Mendoza,-3,ART,s
	Argentina/Rio_Gallegos,-3,ART,s
	Argentina/Salta,-3,ART,s
	Argentina/San_Juan,-3,ART,s
	Argentina/San_Luis,-3,ART,s
	Argentina/Tucuman,-3,ART,s
	Argentina/Ushuaia,-3,ART,s
	Aruba,-4,AST|ADT
	Asuncion,-4,PYT|PYST,par,s
	Atikokan,-5,EST|EDT
	Bahia,-3,BRT
	Bahia_Banderas,-6,CST|CDT,mex
	Barbados,-4,AST|ADT
	Belem,-3,BRT
	Belize,-6,CST|CDT
	Blanc-sablon,-4,AST|ADT
	Boa_Vista,-4,AMT
	Bogota,-5,COT
	Boise,-7,MST|MDT,usa
	Buenos_Aires,-3,ART,s
	Cambridge_Bay,-7,MST|MDT,usa
	Campo_Grande,-4,AMT,s
	Cancun,-5,EST|EDT
	Caracas,-4,VET
	Catamarca,-3,ART,s
	Cayenne,-3,GFT
	Cayman,-5,EST|EDT
	Chicago,-6,CST|CDT,usa
	Chihuahua,-7,HNPMX|HEPMX,mex
	Cordoba,-3,ART,s
	Costa_Rica,-6,CST|CDT
	Creston,-7,MST|MDT
	Cuiaba,-4,AMT,s
	Curacao,-4,AST|ADT
	Danmarkshavn,0,GMT
	Dawson,-7,MST|MDT
	Dawson_Creek,-7,MST|MDT
	Denver,-7,MST|MDT,usa
	Detroit,-5,EST|EDT,usa
	Dominica,-4,AST|ADT
	Edmonton,-7,MST|MDT,usa
	Eirunepe,-5,ACT
	El_Salvador,-6,CST|CDT
	Ensenada,-8,PST|PDT,usa
	Fort_Nelson,-7,MST|MDT
	Fort_wayne,-5,EST|EDT,usa
	Fortaleza,-3,BRT,s
	Glace_Bay,-4,AST|ADT,usa
	Godthab,-3,WGT|WGST,green
	Goose_Bay,-4,AST|ADT,usa
	Grand_Turk,-5,EST|EDT,usa
	Grenada,-4,AST|ADT
	Guadeloupe,-4,AST|ADT
	Guatemala,-6,CST|CDT
	Guayaquil,-5,ECT
	Guyana,-4,GYT
	Halifax,-4,AST|ADT,usa
	Havana,-5,HNCU|HECU,cuba
	Hermosillo,-7,HNPMX|HEPMX
	Indiana,-5,EST|EDT,usa
	Indiana/Indianapolis,-5,EST|EDT,usa
	Indiana/Knox,-6,CST|CDT,usa
	Indiana/Marengo,-5,EST|EDT,usa
	Indiana/Petersburg,-5,EST|EDT,usa
	Indiana/Tell_City,-6,CST|CDT,usa
	Indiana/Vevay,-5,EST|EDT,usa
	Indiana/Vincennes,-5,EST|EDT,usa
	Indiana/Winamac,-5,EST|EDT,usa
	Indianapolis,-5,EST|EDT,usa
	Inuvik,-7,MST|MDT,usa
	Iqaluit,-5,EST|EDT,usa
	Jamaica,-5,EST|EDT
	Jujuy,-3,ART,s
	Juneau,-9,AKST|AKDT,usa
	Kentucky,-5,EST|EDT,usa
	Kentucky/Louisville,-5,EST|EDT,usa
	Kentucky/Petersburg,-5,EST|EDT,usa
	Knox_in,-5,EST|EDT,usa
	Kralendijk,-4,AST|ADT
	La_Paz,-4,BOT,s
	Lima,-5,PET,s
	Los_Angeles,-8,PST|PDT,usa
	Louisville,-5,EST|EDT,usa
	Lower_Princes,-4,AST|ADT
	Maceio,-3,BRT
	Managua,-6,CST|CDT
	Manaus,-4,AMT,s
	Marigot,-4,AST|ADT
	Martinique,-4,AST|ADT
	Matamoros,-6,CST|CDT,usa
	Mazatlan,-7,HNPMX|HEPMX,mex
	Mendoza,-3,ART,s
	Menominee,-6,CST|CDT,usa
	Merida,-6,CST|CDT,mex
	Metlakatla,-9,AKST|AKDT,usa
	Mexico_City,-6,CST|CDT,mex
	Miquelon,-3,HNPM|HEPM,usa
	Moncton,-4,AST|ADT,usa
	Monterrey,-6,CST|CDT,mex
	Montevideo,-3,UYT,s
	Montreal,-5,EST|EDT,usa
	Montserrat,-4,AST|ADT
	Nassau,-5,EST|EDT,usa
	New_York,-5,EST|EDT,usa
	Nipigon,-5,EST|EDT,usa
	Nome,-9,AKST|AKDT,usa
	Noronha,-2,FNT
	North_Dakota/Beulah,-6,CST|CDT,usa
	North_Dakota/Center,-6,CST|CDT,usa
	North_Dakota/New_Salem,-6,CST|CDT,usa
	North_dakota,-7,MST|MDT,usa
	Nuuk,-3,WGT|WGST,green
	Ojinaga,-7,MST|MDT,usa
	Panama,-5,EST|EDT
	Pangnirtung,-5,EST|EDT,usa
	Paramaribo,-3,SRT
	Phoenix,-7,MST|MDT
	Port-au-prince,-5,EST|EDT,usa
	Port_Of_Spain,-4,AST|ADT
	Porto_Velho,-4,AMT
	Porto_acre,-5,ACT,s
	Puerto_Rico,-4,AST|ADT
	Punta_Arenas,-3,CLT|CLST,s
	Rainy_River,-6,CST|CDT,usa
	Rankin_Inlet,-6,CST|CDT,usa
	Recife,-3,BRT
	Regina,-6,CST|CDT
	Resolute,-6,CST|CDT,usa
	Rio_Branco,-5,ACT,s
	Rosario,-3,ART,s
	Santa_isabel,-8,PST|PDT,usa
	Santarem,-3,BRT
	Santiago,-4,CLT|CLST,chile,s
	Santo_Domingo,-4,AST|ADT
	Sao_Paulo,-3,BRT,s
	Scoresbysund,-1,HNEG|HEEG,eu0
	Shiprock,-7,MST|MDT,usa
	Sitka,-9,AKST|AKDT,usa
	St_Barthelemy,-4,AST|ADT
	St_Johns,-3.5,HNTN|HETN,usa
	St_Kitts,-4,AST|ADT
	St_Lucia,-4,AST|ADT
	St_Thomas,-4,AST|ADT
	St_Vincent,-4,AST|ADT
	Swift_Current,-6,CST|CDT
	Tegucigalpa,-6,CST|CDT
	Thule,-4,AST|ADT,usa
	Thunder_Bay,-5,EST|EDT,usa
	Tijuana,-8,PST|PDT,usa
	Toronto,-5,EST|EDT,usa
	Tortola,-4,AST|ADT
	Vancouver,-8,PST|PDT,usa
	Virgin,-4,AST|ADT
	Whitehorse,-7,MST|MDT
	Winnipeg,-6,CST|CDT,usa
	Yakutat,-9,AKST|AKDT,usa
	Yellowknife,-7,MST|MDT,usa
Antarctica
	Casey,8,CAST|CAST,ant,s
	Davis,7,DAVT,s
	Dumontdurville,10,PGT,s
	Macquarie,11,AEST|AEDT,aus,s
	Mawson,5,MAWT,s
	Mcmurdo,12,NZST|NZDT,nz,s
	Palmer,-3,ART,s
	Rothera,-3,ART,s
	South_pole,12,NZST|NZDT,nz,s
	Syowa,3,AST
	Troll,2,GMT,troll,s
	Vostok,6,MSK+4,s
Arctic
	Longyearbyen,1,CET|CEST,eu2
Asia
	Aden,3,AST
	Almaty,6,ALMT
	Amman,2,EET|EEST,jord
	Anadyr,12,ANAT
	Aqtau,5,ALMT
	Aqtobe,5,ALMT
	Ashgabat,5,TMT
	Ashkhabad,5,TMT
	Atyrau,5,ALMT
	Baghdad,3,AST
	Bahrain,3,AST
	Baku,4,AZT
	Bangkok,7,ICT
	Barnaul,7,KRAT
	Beirut,2,EET|EEST,leb
	Bishkek,6,KGT
	Brunei,8,BNT
	Calcutta,5.5,IST
	Chita,9,YAKT
	Choibalsan,8,ULAT
	Chongqing,8,CST
	Chungking,8,CST
	Colombo,5.5,IST
	Dacca,6,BST
	Damascus,2,EET|EEST,syr
	Dhaka,6,BST
	Dili,9,TLT,s
	Dubai,4,GST
	Dushanbe,5,TJT
	Famagusta,2,EET|EEST,eu3
	Gaza,2,EET|EEST,pal
	Harbin,8,CST
	Hebron,2,EET|EEST,pal
	Ho_Chi_Minh,7,ICT
	Hong_Kong,8,HKT
	Hovd,7,HOVT
	Irkutsk,8,IRKT
	Istanbul,3,TRT
	Jakarta,7,WIB,s
	Jayapura,9,WIT,s
	Jerusalem,2,IST|IDT,isr
	Kabul,4.5,AFT
	Kamchatka,12,PETT
	Karachi,5,PKT
	Kashgar,8,CST
	Kathmandu,5.75,NPT
	Katmandu,5.75,NPT
	Khandyga,9,YAKT
	Kolkata,5.5,IST
	Krasnoyarsk,7,KRAT
	Kuala_Lumpur,8,MYT,s
	Kuching,8,MYT
	Kuwait,3,AST
	Macao,8,CST
	Macau,8,CST
	Magadan,11,MAGT
	Makassar,8,WITA,s
	Manila,8,PHST
	Muscat,4,GST
	Nicosia,2,EET|EEST,eu3
	Novokuznetsk,7,KRAT
	Novosibirsk,7,NOVT
	Omsk,6,OMST
	Oral,5,ALMT
	Phnom_Penh,7,ICT
	Pontianak,7,WIB
	Pyongyang,9,KST
	Qatar,3,AST
	Qostanay,6,ALMT
	Qyzylorda,6,ALMT
	Rangoon,6.5,MMT
	Riyadh,3,AST
	Saigon,7,ICT
	Sakhalin,11,SAKT
	Samarkand,5,UZT
	Seoul,9,KST
	Shanghai,8,CST
	Singapore,8,SGT,s
	Srednekolymsk,12,SRET
	Taipei,8,CST
	Tashkent,5,UZT
	Tbilisi,4,GET
	Tehran,3.5,IRST|IRDT,iran
	Tel_aviv,2,IST|IDT,isr
	Thimbu,6,BT
	Thimphu,6,BT
	Tokyo,9,JST
	Tomsk,7,OMST
	Ujung_pandang,8,WITA,s
	Ulaanbaatar,8,ULAT
	Ulan_bator,8,ULAT
	Urumqi,8,CST
	Ust-nera,10,VLAT
	Vientiane,7,ICT
	Vladivostok,10,VLAT
	Yakutsk,10,YAKT
	Yangon,6.5,MMT
	Yekaterinburg,5,YEKT
	Yerevan,4,AMT
Atlantic
	Azores,-1,AZOT|AZOST,eu0
	Bermuda,-4,AST|ADT,usa
	Canary,0,WET|WEST,eu1
	Cape_Verde,-1,CVT
	Faeroe,0,WET|WEST,eu1
	Faroe,0,WET|WEST,eu1
	Jan_mayen,1,CET|CEST,eu2
	Madeira,0,WET|WEST,eu1
	Reykjavik,0,GMT
	South_Georgia,-2,GST
	St_Helena,0,GMT
	Stanley,-3,FKST,s
Australia
	Act,10,AEST|AEDT,aus,s
	Adelaide,9.5,ACST|ACDT,aus,s
	Brisbane,10,AEST,s
	Broken_Hill,9.5,ACST|ACDT,aus,s
	Canberra,10,AEST|AEDT,aus,s
	Currie,10,AEST|AEDT,aus,s
	Darwin,9.5,ACST,s
	Eucla,8.75,ACWST,s
	Hobart,10,AEST|AEDT,aus,s
	Lhi,10.5,LHST|LHDT,lhow,s
	Lindeman,10,AEST,s
	Lord_Howe,10.5,LHST|LHDT,lhow,s
	Melbourne,10,AEST|AEDT,aus,s
	North,9.5,ACST,s
	Nsw,10,AEST|AEDT,aus,s
	Perth,8,AWST,s
	Queensland,10,AEST,s
	South,9.5,ACST|ACDT,aus,s
	Sydney,10,AEST|AEDT,aus,s
	Tasmania,10,AEST|AEDT,aus,s
	Victoria,10,AEST|AEDT,aus,s
	West,8,AWST,s
	Yancowinna,9.5,ACST|ACDT,aus,s
Brazil
	Acre,-5,ACT,s
	Denoronha,-2,FNT
	East,-3,BRT,s
	West,-4,AMT,s
Canada
	Atlantic,-4,AST|ADT,usa
	Central,-6,CST|CDT,usa
	East-saskatchewan,-6,CST|CDT
	Eastern,-5,EST|EDT,usa
	Mountain,-7,MST|MDT,usa
	Newfoundland,-3.5,HNTN|HETN,usa
	Pacific,-8,PST|PDT,usa
	Saskatchewan,-6,CST|CDT
	Yukon,-7,MST|MDT
Chile
	Continental,-4,CLT|CLST,chile,s
	Easterisland,-6,EAST|EASST,east,s
Cuba
	,-5,HNCU|HECU,cuba
Egypt
	,2,EET|EEST
Eire
	,0,GMT|IST,eu1
Etc
	GMT,0,GMT
	Greenwich,0,GMT
	Uct,0,UTC
	Universal,0,UTC
	Unknown,0,UTC
	Utc,0,UTC
	Zulu,0,UTC
Europe
	Amsterdam,1,CET|CEST,eu2
	Andorra,1,CET|CEST,eu2
	Astrakhan,4,MSK
	Athens,2,EET|EEST,eu3
	Belfast,0,GMT|BST,eu1
	Belgrade,1,CET|CEST,eu2
	Berlin,1,CET|CEST,eu2
	Bratislava,1,CET|CEST,eu2
	Brussels,1,CET|CEST,eu2
	Bucharest,2,EET|EEST,eu3
	Budapest,1,CET|CEST,eu2
	Busingen,1,CET|CEST,eu2
	Chisinau,2,EET|EEST,eu2
	Copenhagen,1,CET|CEST,eu2
	Dublin,0,GMT|IST,eu1
	Gibraltar,1,CET|CEST,eu2
	Guernsey,0,GMT|BST,eu1
	Helsinki,2,EET|EEST,eu3
	Isle_Of_Man,0,GMT|BST,eu1
	Istanbul,3,TRT
	Jersey,0,GMT|BST,eu1
	Kaliningrad,2,EET|EEST
	Kiev,2,EET|EEST,eu3
	Kirov,3,MSK
	Kyiv,2,EET|EEST,eu3
	Lisbon,0,WET|WEST,eu1
	Ljubljana,1,CET|CEST,eu2
	London,0,GMT|BST,eu1
	Luxembourg,1,CET|CEST,eu2
	Madrid,1,CET|CEST,eu2
	Malta,1,CET|CEST,eu2
	Mariehamn,2,EET|EEST,eu3
	Minsk,3,MSK
	Monaco,1,CET|CEST,eu2
	Moscow,3,MSK
	Nicosia,2,EET|EEST,eu3
	Oslo,1,CET|CEST,eu2
	Paris,1,CET|CEST,eu2
	Podgorica,1,CET|CEST,eu2
	Prague,1,CET|CEST,eu2
	Riga,2,EET|EEST,eu3
	Rome,1,CET|CEST,eu2
	Samara,4,SAMT
	San_Marino,1,CET|CEST,eu2
	Sarajevo,1,CET|CEST,eu2
	Saratov,4,SAMT
	Simferopol,2,EET|EEST,eu3
	Skopje,1,CET|CEST,eu2
	Sofia,2,EET|EEST,eu3
	Stockholm,1,CET|CEST,eu2
	Tallinn,2,EET|EEST,eu3
	Tirane,1,CET|CEST,eu2
	Tiraspol,2,EET|EEST,eu2
	Ulyanovsk,4,MSK
	Uzhgorod,2,EET|EEST,eu3
	Vaduz,1,CET|CEST,eu2
	Vatican,1,CET|CEST,eu2
	Vienna,1,CET|CEST,eu2
	Vilnius,2,EET|EEST,eu3
	Volgograd,4,MSK
	Warsaw,1,CET|CEST,eu2
	Zagreb,1,CET|CEST,eu2
	Zaporozhye,2,EET|EEST,eu3
	Zurich,1,CET|CEST,eu2
GB
	,0,GMT|BST,eu1
Gb-eire
	,0,GMT|BST,eu1
Gmt+0
	,0,GMT
Gmt-0
	,0,GMT
Gmt0
	,0,GMT
Greenwich
	,0,GMT
Hongkong
	,8,HKT
Iceland
	,0,GMT
Indian
	Antananarivo,3,EAT
	Chagos,6,IOT
	Christmas,7,CXT,s
	Cocos,6.5,CCT
	Comoro,3,EAT
	Kerguelen,5,TFT,s
	Mahe,4,SCT
	Maldives,5,MVT
	Mauritius,4,MUT
	Mayotte,3,EAT
	Reunion,4,RET,s
Iran
	,3.5,IRST|IRDT,iran
Israel
	,2,IST|IDT,isr
Jamaica
	,-5,EST|EDT
Japan
	,9,JST
Kwajalein
	,12,MHT
Libya
	,2,EET|EEST
Mexico
	Bajanorte,-8,PST|PDT,usa
	Bajasur,-7,HNPMX|HEPMX,mex
	General,-6,CST|CDT,mex
Navajo
	,-7,MST|MDT,usa
Nz
	,12,NZST|NZDT,nz,s
Nz-chat
	,12.75,CHAST|CHADT,chat,s
Pacific
	Apia,13,WST|WST,s
	Auckland,12,NZST|NZDT,nz,s
	Bougainville,11,PGT,s
	Chatham,12.75,CHAST|CHADT,chat,s
	Chuuk,10,CHUT
	Easter,-6,EAST|EASST,east,s
	Efate,11,VUT
	Fakaofo,13,TKT
	Fiji,12,FJT|FJT,fiji,s
	Funafuti,12,TVT
	Galapagos,-6,COT
	Gambier,-9,GAMT
	Guadalcanal,11,SBT
	Guam,10,ChST
	Honolulu,-10,HAST|HADT
	Johnston,-10,HAST|HADT
	Kanton,13,PHOT
	Kiritimati,14,LINT
	Kosrae,11,KOST
	Kwajalein,12,MHT
	Majuro,12,MHT
	Marquesas,-9.5,MART
	Midway,-11,SST
	Nauru,12,NRT
	Niue,-11,NUT
	Norfolk,10.5,NFT|NFDT,aus
	Noumea,11,NCT
	Pago_Pago,-11,SST
	Palau,9,PWT
	Pitcairn,-8,PST
	Pohnpei,11,PONT
	Ponape,11,PONT
	Port_Moresby,10,PGT,s
	Rarotonga,-10,CKT
	Saipan,10,ChST
	Samoa,-11,SST
	Tahiti,-10,TAHT
	Tarawa,12,GILT
	Tongatapu,13,TOT,s
	Truk,10,CHUT
	Wake,12,WAKT
	Wallis,12,WFT
	Yap,10,CHUT
Poland
	,1,CET|CEST,eu2
Portugal
	,0,WET|WEST,eu1
Prc
	,8,CST
Roc
	,8,CST
Rok
	,9,KST
Singapore
	,8,SGT,s
Turkey
	,3,TRT
UTC
	,0,UTC
	Unknown,0,UTC
Uct
	,0,UTC
Universal
	,0,UTC
Us
	Alaska,-9,AKST|AKDT,usa
	Aleutian,-10,HST|HDT,usa
	Arizona,-7,MST|MDT
	Central,-6,CST|CDT,usa
	East-indiana,-5,EST|EDT,usa
	Eastern,-5,EST|EDT,usa
	Hawaii,-10,HAST|HADT
	Indiana-starke,-5,EST|EDT,usa
	Michigan,-5,EST|EDT,usa
	Mountain,-7,MST|MDT,usa
	Pacific,-8,PST|PDT,usa
	Pacific-new,-8,PST|PDT,usa
	Samoa,-11,SST
W-su
	,3,MSK
Zulu
	,0,UTC
america
	argentina/buenos_aires,-3,ART,s
	argentina/catamarca,-3,ART,s
	argentina/comodrivadavia,-3,ART,s
	argentina/cordoba,-3,ART,s
	argentina/jujuy,-3,ART,s
	argentina/mendoza,-3,ART,s
	argentina/rosario,-3,ART,s
`;

  let zones$1 = {};
  let area = null;
  // unpack compressed iana file
  pckd.split('\n').forEach(line => {
    if (!/^\t/.test(line)) {
      area = line.trim();
      return
    }
    let [name, offset, shrt, dst, hem] = line.split(/,/);
    let iana = `${area}/${name.trim()}`;
    shrt = shrt.split(/\|/);
    offset = Number(offset);
    zones$1[iana] = { offset, shrt };
    if (dst) {
      zones$1[iana].dst = dst;
    }
    zones$1[iana].hem = hem ? hem : 'n';
  });

  //add etc/gmt+n
  for (let i = -14; i <= 14; i += 0.5) {
    let num = i;
    if (num > 0) {
      num = '+' + num;
    }
    // Etc/GMT-5
    let name = 'Etc/GMT' + num;
    zones$1[name] = {
      offset: i * -1, //they're negative!
      hem: 'n' //(sorry)
    };
    let alias = 'UTC/GMT' + num; //this one too, why not.
    zones$1[alias] = zones$1[name];
  }
  // this appear sometimes
  zones$1['Etc/GMT+0'] = zones$1['Etc/GMT'];
  zones$1['Etc/GMT-0'] = zones$1['Etc/GMT'];
  // add aliases
  // Object.keys(aliases).forEach(k => {
  //   zones[k] = zones[aliases[k]]
  //   if (!zones[k]) {
  //     console.log(k)
  //   }
  // })
  var zones$2 = zones$1;

  var config = {

    // <15% of the world lives in the Southern Hemisphere
    fallbackHemisphere: 'n',
  };

  //find the implicit iana code for this machine.
  //safely query the Intl object
  //based on - https://bitbucket.org/pellepim/jstimezonedetect/src

  //this Intl object is not supported often, yet
  const safeIntl = () => {
    if (typeof Intl === 'undefined' || typeof Intl.DateTimeFormat === 'undefined') {
      return null
    }
    let format = Intl.DateTimeFormat();
    if (typeof format === 'undefined' || typeof format.resolvedOptions === 'undefined') {
      return null
    }
    let timezone = format.resolvedOptions().timeZone;
    if (!timezone) {
      return null
    }
    return timezone
  };

  //do it once per computer
  const tzOfComputer = safeIntl();

  const fallbackTz = function (world) {
    // deduce computer timezone?
    if (world.config.tryLocalTimezone) {

      // use our Intl version, if found
      if (tzOfComputer && tzOfComputer !== 'Etc/Unknown') {
        return tzOfComputer
      }
      // try the sloppier version
      const mins = new Date().getTimezoneOffset();// get (current) timezone offset from js Date
      let h = mins / 60;
      let name = `Etc/GMT${h * -1}`;
      if (world.zones.hasOwnProperty(name)) {
        return name
      }
    }
    return world.config.fallbackTz || null
  };
  var fallbackTz$1 = fallbackTz;

  const findTz = function (str, world) {
    str = str || '';
    if (world.zones.hasOwnProperty(str)) {
      return str
    }
    str = str.toLowerCase().trim();
    // if (aliases.hasOwnProperty(str)) {
    //   return aliases[str]
    // }
    // if (mapping.hasOwnProperty(str)) {
    //   return mapping[str]
    // }
    return null
  };
  var parseTz = findTz;

  var methods = { fallbackTz: fallbackTz$1, parseTz };

  var zones = {
    zones: zones$2,
    config,
    methods
  };

  lib$1.plugin(goto);
  lib$1.plugin(zones);

  let api$1 = {
    start: function () {
      this.startEpoch = this.epoch;
      return this
    },
    stop: function () {
      this.startEpoch = null;
      this.isRunning = false;
      return this
    },
    pause: function () {
      this.isRunning = false;
      return this
    },
    elapsed: async function () {
      let start = this._from(this.startEpoch, this.tz);
      return this.diff(start)
    },
  };
  api$1.play = api$1.start;

  var timer = {
    api: api$1
  };

  /* eslint-disable no-mixed-operators, max-params */
  /*
   (c) 2011-2015, Vladimir Agafonkin
   SunCalc is a JavaScript library for calculating sun/moon position and light phases.
   https://github.com/mourner/suncalc
   edited by @spencermountain to remove unused code and Date dependency
  */
  const sunset_angle = -0.833;
  // shortcuts for easier to read formulas
  const PI = Math.PI;
  const sin = Math.sin;
  const cos = Math.cos;
  const tan = Math.tan;
  const asin = Math.asin;
  const atan = Math.atan2;
  const acos = Math.acos;
  const rad = PI / 180;
  // sun calculations are based on http://aa.quae.nl/en/reken/zonpositie.html formulas

  // date/time constants and conversions
  const dayMs = 1000 * 60 * 60 * 24;
  const J1970 = 2440588;
  const J2000 = 2451545;
  const toJulian = (epoch) => epoch / dayMs - 0.5 + J1970;
  const fromJulian = (j) => (j + 0.5 - J1970) * dayMs;
  const toDays = (epoch) => toJulian(epoch) - J2000;

  // general calculations for position
  const e = rad * 23.4397; // obliquity of the Earth
  const rightAscension = (l, b) => atan(sin(l) * cos(e) - tan(b) * sin(e), cos(l));
  const declination = (l, b) => asin(sin(b) * cos(e) + cos(b) * sin(e) * sin(l));
  const azimuth = (H, phi, dec) => atan(sin(H), cos(H) * sin(phi) - tan(dec) * cos(phi));
  const altitude = (H, phi, dec) => asin(sin(phi) * sin(dec) + cos(phi) * cos(dec) * cos(H));
  const siderealTime = (d, lw) => rad * (280.16 + 360.9856235 * d) - lw;
  const solarMeanAnomaly = (d) => rad * (357.5291 + 0.98560028 * d);

  // general sun calculations
  const J0 = 0.0009;
  const julianCycle = (d, lw) => Math.round(d - J0 - lw / (2 * PI));
  const approxTransit = (Ht, lw, n) => J0 + (Ht + lw) / (2 * PI) + n;
  const solarTransitJ = (ds, M, L) => J2000 + ds + 0.0053 * sin(M) - 0.0069 * sin(2 * L);
  const hourAngle = (h, phi, d) => acos((sin(h) - sin(phi) * sin(d)) / (cos(phi) * cos(d)));

  function eclipticLongitude(M) {
    const C = rad * (1.9148 * sin(M) + 0.02 * sin(2 * M) + 0.0003 * sin(3 * M)); // equation of center
    const P = rad * 102.9372; // perihelion of the Earth
    return M + C + P + PI;
  }

  function sunCoords(d) {
    const M = solarMeanAnomaly(d);
    const L = eclipticLongitude(M);
    return {
      dec: declination(L, 0),
      ra: rightAscension(L, 0)
    };
  }


  // returns set time for the given sun altitude
  function getSetJ(h, lw, phi, dec, n, M, L) {
    let w = hourAngle(h, phi, dec);
    const a = approxTransit(w, lw, n);
    return solarTransitJ(a, M, L);
  }

  // calculates sun times for a given date, latitude/longitude, and, optionally,
  // the observer height (in meters) relative to the horizon
  const getTimes = function (epoch, lat, lng) {
    const lw = rad * -lng;
    const d = toDays(epoch);
    const n = julianCycle(d, lw);
    // solar noon calculation
    const ds = approxTransit(0, lw, n);
    const M = solarMeanAnomaly(ds);
    const L = eclipticLongitude(M);
    const Jnoon = solarTransitJ(ds, M, L);
    // sun rise/set calculation
    const decl = declination(L, 0);
    const phi = rad * lat;
    const h0 = sunset_angle * rad;
    const Jset = getSetJ(h0, lw, phi, decl, n, M, L);
    const Jrise = Jnoon - (Jset - Jnoon);
    return {
      solarNoon: fromJulian(Jnoon),
      sunrise: fromJulian(Jrise),
      sunset: fromJulian(Jset)
    };
  };


  // calculates sun position for a given date and latitude/longitude
  const getPosition = function (epoch, lat, lng) {
    const lw = rad * -lng;
    const phi = rad * lat;
    const d = toDays(epoch);
    const c = sunCoords(d);
    const H = siderealTime(d, lw) - c.ra;
    return {
      azimuth: azimuth(H, phi, c.dec),
      altitude: altitude(H, phi, c.dec)
    };
  };

  //these are points i chose for each timezone, typically in its most populous location
  //these are pretty arbitrary and I made them up myself
  //two decimal places gives resolution of 1.1 km
  let pcked = {
    "Africa": {
      "Abidjan": '5.36,-4.01', //Abidjan, Côte d'Ivoire
      "Accra": '5.6,-0.19', //Accra, Ghana
      "Addis_Ababa": '8.98,38.76', //Addis Ababa, Ethiopia
      "Algiers": '36.75,3.06', //Algiers, Sidi M'Hamed, Algeria
      "Asmara": '15.32,38.93', //Asmara, Eritrea
      "Asmera": '15.32,38.93', //Asmara, Eritrea
      "Bamako": '12.64,-8', //Bamako, Mali
      "Bangui": '4.39,18.56', //Bangui, Central African Republic
      "Banjul": '13.27,-16.64', //Brikama, The Gambia
      "Bissau": '11.88,-15.62', //Bissau, Guinea-Bissau
      "Blantyre": '-13.96,33.77', //Lilongwe, Malawi
      "Brazzaville": '-4.26,15.24', //Brazzaville, Republic of the Congo
      "Bujumbura": '-3.36,29.36', //Bujumbura, Burundi
      "Cairo": '30.04,31.24', //Cairo, Cairo Governorate, Egypt
      "Casablanca": '33.57,-7.59', //Casablanca, Morocco
      "Ceuta": '35.89,-5.32', //Ceuta, Spain
      "Conakry": '9.53,-13.69', //Camayenne, Conakry, Guinea
      "Dakar": '14.72,-17.47', //Dakar, Senegal
      "Dar_es_Salaam": '-6.79,39.21', //Dar es Salaam, Tanzania
      "Djibouti": '11.83,42.59', //Djibouti
      "Douala": '4.05,9.77', //Douala, Cameroon
      "El_Aaiun": '23.72,-15.93', //Dakhla 73000
      "Freetown": '8.47,-13.23', //Freetown, Sierra Leone
      "Gaborone": '-24.63,25.92', //Gaborone, Botswana
      "Harare": '-17.83,31.03', //Harare, Zimbabwe
      "Johannesburg": '-33.92,18.42', //Cape Town, South Africa
      "Juba": '4.86,31.57', //Juba, South Sudan
      "Kampala": '0.35,32.58', //Kampala, Uganda
      "Khartoum": '15.5,32.56', //Khartoum, Sudan
      "Kigali": '-1.97,30.1', //Kigali, Rwanda
      "Kinshasa": '-4.44,15.27', //Kinshasa, Democratic Republic of the Congo
      "Lagos": '6.52,3.38', //Lagos, Nigeria
      "Libreville": '0.42,9.47', //Libreville, Gabon
      "Lome": '6.17,1.23', //Lome, Togo
      "Luanda": '-8.84,13.29', //Luanda, Angola
      "Lubumbashi": '-11.69,27.5', //Lubumbashi, Democratic Republic of the Congo
      "Lusaka": '-15.39,28.32', //Lusaka, Zambia
      "Malabo": '1.85,9.78', //Bata, Equatorial Guinea
      "Maputo": '-25.97,32.57', //Maputo, Mozambique
      "Maseru": '-29.32,27.49', //Maseru, Lesotho
      "Mbabane": '-26.51,31.37', //Manzini, Swaziland
      "Mogadishu": '2.05,45.32', //Mogadishu, Somalia
      "Monrovia": '6.29,-10.76', //Monrovia, Liberia
      "Nairobi": '-1.29,36.82', //Nairobi, Kenya
      "Ndjamena": '12.13,15.06', //N'Djamena, Chad
      "Niamey": '13.51,2.13', //Niamey, Niger
      "Nouakchott": '18.07,-15.96', //Nouakchott, Mauritania
      "Ouagadougou": '12.37,-1.52', //Ouagadougou, Burkina Faso
      "Porto-Novo": '6.37,2.39', //Cotonou, Benin
      "Sao_Tome": '0.33,6.73', //São Tomé, São Tomé and Príncipe
      "Timbuktu": '16.77,-3', //Timbuktu, Mali
      "Tripoli": '32.89,13.19', //Tripoli, Libya
      "Tunis": '36.81,10.18', //Tunis, Tunisia
      "Windhoek": '-22.56,17.07', //Windhoek, Namibia
    },
    "America": {
      "Adak": '51.88,-176.66', //Adak, AK, USA
      "Anchorage": '61.22,-149.9', //Anchorage, AK, USA
      "Anguilla": '18.21,-63.06', //The Valley 2640, Anguilla
      "Antigua": '17.13,-61.85', //St John's, Antigua and Barbuda
      "Araguaina": '-10.25,-48.32', //Palmas, TO, Brazil
      "Argentina": '-38.42,-63.62', //Argentina
      "Argentina/Buenos_Aires": '-34.6,-58.38', //Buenos Aires, Argentina
      "Argentina/Catamarca": '-28.47,-65.78', //Catamarca, Catamarca Province, Argentina
      "Argentina/Cordoba": '-31.42,-64.19', //Córdoba, Cordoba, Argentina
      "Argentina/Jujuy": '-24.19,-65.3', //Jujuy, Argentina
      "Argentina/La_Rioja": '-29.41,-66.86', //La Rioja, La Rioja Province, Argentina
      "Argentina/Mendoza": '-32.89,-68.85', //Mendoza, Capital Department, Mendoza Province, Argentina
      "Argentina/Rio_Gallegos": '-51.62,-69.22', //Rio Gallegos, Santa Cruz Province, Argentina
      "Argentina/Salta": '-24.78,-65.42', //Salta, Salta Province, Argentina
      "Argentina/San_Juan": '-31.54,-68.54', //San Juan, San Juan Province, Argentina
      "Argentina/San_Luis": '-33.3,-66.34', //San Luis, San Luis Province, Argentina
      "Argentina/Tucuman": '-26.81,-65.22', //San Miguel de Tucumán, Tucumán, Argentina
      "Argentina/Ushuaia": '-54.8,-68.3', //Ushuaia, Tierra del Fuego Province, Argentina
      "Aruba": '12.54,-70', //Babijn, Aruba
      "Asuncion": '-25.26,-57.58', //Asuncion, Paraguay
      "Atikokan": '48.76,-91.62', //Atikokan, ON P0W, Canada
      "Atka": '52.2,-174.2', //Atka, AK, USA
      "Bahia_Banderas": '20.76,-105.33', //Bucerías, Nayarit, Mexico
      "Bahia": '-12.98,-38.5', //Salvador - State of Bahia, Brazil
      "Barbados": '13.1,-59.61', //Bridgetown, Barbados
      "Belem": '-1.46,-48.49', //Belém - State of Pará, Brazil
      "Belize": '17.5,-88.2', //Belize City, Belize
      "Blanc-Sablon": '46.74,-71.25', //Levis, QC, Canada
      "Boa_Vista": '2.82,-60.68', //Boa Vista, State of Roraima, Brazil
      "Bogota": '4.71,-74.07', //Bogotá, Bogota, Colombia
      "Boise": '43.62,-116.2', //Boise, ID, USA
      "Buenos_Aires": '-34.6,-58.38', //Buenos Aires, Argentina
      "Cambridge_Bay": '69.12,-105.06', //Cambridge Bay, NU, Canada
      "Campo_Grande": '-20.47,-54.62', //Campo Grande, State of Mato Grosso do Sul, Brazil
      "Cancun": '21.16,-86.85', //Cancún, Quintana Roo, Mexico
      "Caracas": '10.48,-66.9', //Caracas, Capital District, Venezuela
      "Catamarca": '-28.47,-65.79', //Catamarca Province, Argentina
      "Cayenne": '4.92,-52.31', //Cayenne, French Guiana
      "Cayman": '19.29,-81.37', //George Town, Cayman Islands
      "Chicago": '41.88,-87.63', //Chicago, IL, USA
      "Chihuahua": '28.63,-106.07', //Chihuahua, Mexico
      "Coral_Harbour": '64.14,-83.17', //Coral Harbour, NU, Canada
      "Cordoba": '-31.42,-64.18', //Córdoba, Argentina
      "Costa_Rica": '9.93,-84.09', //San José Province, San José, Costa Rica
      "Creston": '49.1,-116.51', //Creston, BC V0B, Canada
      "Cuiaba": '-15.6,-56.1', //Cuiabá - Coxipó da Ponte, Cuiabá - State of Mato Grosso, Brazil
      "Curacao": '12.12,-68.88', //Willemstad, Curaçao
      "Danmarkshavn": '74.48,-18.98', //Greenland
      "Dawson_Creek": '56.25,-120.85', //Fort St John, BC, Canada
      "Dawson": '64.06,-139.43', //Dawson, YT, Canada
      "Denver": '31.76,-106.49', //El Paso, TX, USA
      "Detroit": '42.33,-83.05', //Detroit, MI, USA
      "Dominica": '15.31,-61.38', //Roseau, Dominica
      "Edmonton": '51.05,-114.07', //Calgary, AB, Canada
      "Eirunepe": '-6.66,-69.87', //Eirunepé - State of Amazonas, 69880-000, Brazil
      "El_Salvador": '13.69,-89.22', //San Salvador, El Salvador
      "Ensenada": '31.87,-116.6', //Ensenada, Baja California, Mexico
      "Fort_Nelson": '58.81,-122.7', //Fort Nelson, BC V0C, Canada
      "Fort_Wayne": '41.08,-85.14', //Fort Wayne, IN, USA
      "Fortaleza": '-3.73,-38.53', //Fortaleza - State of Ceará, Brazil
      "Glace_Bay": '46.14,-60.19', //Sydney, NS, Canada
      "Godthab": '64.18,-51.69', //Nuuk, Greenland
      "Goose_Bay": '52.94,-66.91', //Labrador City, NL, Canada
      "Grand_Turk": '21.47,-71.14', //Cockburn Town TKCA 1ZZ, Turks and Caicos Islands
      "Grenada": '12.06,-61.75', //St George's, Grenada
      "Guadeloupe": '16.27,-61.53', //Les Abymes, Guadeloupe
      "Guatemala": '14.63,-90.51', //Guatemala City, Guatemala
      "Guayaquil": '-2.17,-79.92', //Guayaquil, Ecuador
      "Guyana": '6.8,-58.16', //Georgetown, Guyana
      "Halifax": '44.65,-63.58', //Halifax Regional Municipality, NS, Canada
      "Havana": '23.11,-82.37', //Havana, Cuba
      "Hermosillo": '29.07,-110.96', //Hermosillo, Sonora, Mexico
      "Indiana": '40.27,-86.13', //Indiana, USA
      "Indiana/Indianapolis": '39.77,-86.16', //Indianapolis, IN, USA
      "Indiana/Knox": '41.3,-86.63', //Knox, IN 46534, USA
      "Indiana/Marengo": '42.25,-88.61', //Marengo, IL 60152, USA
      "Indiana/Petersburg": '37.23,-77.4', //Petersburg, VA, USA
      "Indiana/Tell_City": '37.95,-86.77', //Tell City, IN, USA
      "Indiana/Vevay": '38.75,-85.07', //Vevay, IN 47043, USA
      "Indiana/Vincennes": '38.68,-87.53', //Vincennes, IN 47591, USA
      "Indiana/Winamac": '41.05,-86.6', //Winamac, IN 46996, USA
      "Indianapolis": '39.77,-86.16', //Indianapolis, IN, USA
      "Inuvik": '68.36,-133.72', //Inuvik, NT X0E, Canada
      "Iqaluit": '63.75,-68.52', //Iqaluit, NU, Canada
      "Jamaica": '18.02,-76.81', //Kingston, Jamaica
      "Jujuy": '-24.18,-65.3', //Jujuy, Argentina
      "Juneau": '58.3,-134.42', //Juneau, AK, USA
      "Kentucky": '37.84,-84.27', //Kentucky, USA
      "Kentucky/Louisville": '38.25,-85.76', //Louisville, KY, USA
      "Kentucky/Monticello": '41.66,-74.69', //Monticello, NY 12701, USA
      "Knox_IN": '37.92,-85.96', //Fort Knox, KY 40121, USA
      "Kralendijk": '12.14,-68.27', //Kralendijk, Caribbean Netherlands
      "La_Paz": '-17.81,-63.16', //Santa Cruz de la Sierra, Bolivia
      "Lima": '-12.05,-77.04', //Lima, Peru
      "Los_Angeles": '34.05,-118.24', //Los Angeles, CA, USA
      "Louisville": '38.25,-85.76', //Louisville, KY, USA
      "Lower_Princes": '18.05,-63.06', //Dutch Cul de Sac, Sint Maarten
      "Maceio": '-9.65,-35.71', //Maceió - Jardim da Saúde, Maceió - State of Alagoas, Brazil
      "Managua": '12.11,-86.24', //Managua, Nicaragua
      "Manaus": '-3.12,-60.02', //Manaus, State of Amazonas, Brazil
      "Marigot": '18.07,-63.08', //Marigot, St Martin
      "Martinique": '14.62,-61.06', //Fort-de-France Bay, Martinique
      "Matamoros": '26.05,-98.3', //Reynosa, Tamaulipas, Mexico
      "Mazatlan": '24.81,-107.39', //Culiacán, Sinaloa, Mexico
      "Mendoza": '-32.89,-68.85', //Mendoza, Capital Department, Mendoza Province, Argentina
      "Menominee": '45.11,-87.61', //Menominee, MI 49858, USA
      "Merida": '20.97,-89.59', //Mérida, Yucatan, Mexico
      "Metlakatla": '55.13,-131.57', //Metlakatla, AK 99926, USA
      "Mexico_City": '19.43,-99.13', //Mexico City, CDMX, Mexico
      "Miquelon": '46.78,-56.18', //Saint-Pierre, St Pierre and Miquelon
      "Moncton": '45.27,-66.06', //Saint John, NB, Canada
      "Monterrey": '19.49,-99.12', //Gustavo A. Madero, Mexico City, CDMX, Mexico
      "Montevideo": '-34.9,-56.16', //Montevideo, Montevideo Department, Uruguay
      "Montreal": '45.5,-73.57', //Montreal, QC, Canada
      "Montserrat": '16.79,-62.21', //Brades, Montserrat
      "Nassau": '25.05,-77.36', //Nassau, The Bahamas
      "New_York": '40.71,-74.01', //New York, NY, USA
      "Nipigon": '49.02,-88.27', //Nipigon, ON P0T, Canada
      "Nome": '64.5,-165.41', //Nome, AK, USA
      "Noronha": '-7.75,-34.83', //Ilha de Itamaracá - Baixa Verde, Itamaracá - State of Pernambuco, Brazil
      "North_Dakota": '47.55,-101', //North Dakota, USA
      "North_Dakota/Beulah": '44.63,-86.09', //Beulah, MI, USA
      "North_Dakota/Center": '47.11,-101.30', //Center, ND, USA
      "North_Dakota/New_Salem": '46.83,-100.89', //Mandan, ND 58554, USA
      "Nuuk": '64.17,-51.73',//greenland
      "Ojinaga": '31.69,-106.42', //Ciudad Juarez, Chihuahua, Mexico
      "Panama": '8.98,-79.52', //Panama City, Panama
      "Pangnirtung": '66.15,-65.7', //Pangnirtung, NU, Canada
      "Paramaribo": '5.85,-55.2', //Paramaribo, Suriname
      "Phoenix": '33.45,-112.07', //Phoenix, AZ, USA
      "Port_of_Spain": '10.65,-61.5', //Laventille, Port of Spain, Trinidad and Tobago
      "Port-au-Prince": '18.59,-72.31', //Port-au-Prince, Haiti
      "Porto_Acre": '-9.59,-67.54', //Porto Acre - State of Acre, 69921-000, Brazil
      "Porto_Velho": '-8.76,-63.9', //Porto Velho - State of Rondônia, Brazil
      "Puerto_Rico": '18.47,-66.11', //San Juan, Puerto Rico
      "Punta_arenas": '-53.15,-71.08',//argentina
      "Rainy_River": '48.72,-94.57', //Rainy River, ON, Canada
      "Rankin_Inlet": '62.81,-92.09', //Rankin Inlet, NU, Canada
      "Recife": '-8.05,-34.93', //Recife - State of Pernambuco, Brazil
      "Regina": '52.13,-106.67', //Saskatoon, SK, Canada
      "Resolute": '74.7,-94.83', //Resolute, NU, Canada
      "Rio_Branco": '-9.98,-68.43', //Rio Branco - State of Acre, Brazil
      "Rosario": '48.64,-122.87', //1400 Rosario Rd, Eastsound, WA 98245, USA
      "Santa_Isabel": '32.63,-115.58', //Santa Isabel, Baja California, Mexico
      "Santarem": '-2.45,-54.7', //Santarém, PA, Brazil
      "Santiago": '-33.45,-70.67', //Santiago, Santiago Metropolitan Region, Chile
      "Santo_Domingo": '18.49,-69.93', //Santo Domingo, Dominican Republic
      "Sao_Paulo": '-23.55,-46.63', //São Paulo, State of São Paulo, Brazil
      "Scoresbysund": '70.5,-25', //Scoresby Sund, Greenland
      "Shiprock": '36.79,-108.69', //Shiprock, NM, USA
      "Sitka": '57.05,-135.33', //Sitka, AK, USA
      "St_Barthelemy": '17.9,-62.85', //Gustavia, St Barthélemy
      "St_Johns": '47.56,-52.71', //St. John's, NL, Canada
      "St_Kitts": '17.3,-62.72', //Basseterre, St Kitts & Nevis
      "St_Lucia": '14.01,-60.99', //Castries, St Lucia
      "St_Thomas": '17.72,-64.83', //St Croix, USVI
      "St_Vincent": '13.16,-61.22', //Kingstown, St Vincent and the Grenadines
      "Swift_Current": '50.29,-107.8', //Swift Current, SK, Canada
      "Tegucigalpa": '14.07,-87.19', //Tegucigalpa, Honduras
      "Thule": '77.47,-69.23', //Qaanaaq, Greenland
      "Thunder_Bay": '48.38,-89.25', //Thunder Bay, ON, Canada
      "Tijuana": '32.51,-117.04', //Tijuana, Baja California, Mexico
      "Toronto": '43.65,-79.38', //Toronto, ON, Canada
      "Tortola": '18.43,-64.63', //Tortola, British Virgin Islands
      "Vancouver": '49.28,-123.12', //Vancouver, BC, Canada
      "Virgin": '10.65,-61.51', //Port of Spain
      "Whitehorse": '60.72,-135.06', //Whitehorse, YT, Canada
      "Winnipeg": '49.9,-97.14', //Winnipeg, MB, Canada
      "Yakutat": '59.55,-139.73', //Yakutat, AK, USA
      "Yellowknife": '62.45,-114.37', //Yellowknife, NT X0E, Canada
    },
    "Antarctica": {
      "Casey": '-66.28,110.53', //Casey Station, Antarctica
      "Davis": '-68.58,77.97', //Davis Station, Antarctica
      "DumontDUrville": '-66.66,140', //Dumont d'Urville Station, Antarctica
      "Macquarie": '-54.63,158.86', //Macquarie
      "Mawson": '-67.6,62.87', //Antarctica
      "McMurdo": '-77.84,166.69', //McMurdo Station, Antarctica
      "Palmer": '-64.77,-64.05', //Antarctica
      "Rothera": '-67.56,-68.12', //BIQQ 1ZZ, Antarctica
      "South_Pole": '-72.29,0.7', //Antarctica
      "Syowa": '-69,39.58', //Antarctica
      "Troll": '-72.01,2.54', //Troll, Antarctica
      "Vostok": '-78.46,106.83', //Antarctica
    },
    "Arctic": {
      "Longyearbyen": '78.22,15.63', //Longyearbyen, Svalbard and Jan Mayen
    },
    "Asia": {
      "Aden": '15.37,44.19', //Sana'a, Yemen
      "Almaty": '43.22,76.85', //Almaty, Kazakhstan
      "Amman": '31.95,35.93', //Amman, Jordan
      "Anadyr": '64.73,177.5', //Anadyr, Chukotka Autonomous Okrug, Russia, 689000
      "Aqtau": '43.64,51.2', //Aktau, Kazakhstan
      "Aqtobe": '50.28,57.17', //Aktobe, Kazakhstan
      "Ashgabat": '37.96,58.33', //Ashgabat, Turkmenistan
      "Ashkhabad": '37.96,58.33', //Ashgabat, Turkmenistan
      "Atyrau": '47.52,49.83',//khazakhstan
      "Baghdad": '33.31,44.36', //Baghdad, Iraq
      "Bahrain": '26.23,50.59', //Manama, Bahrain
      "Baku": '40.41,49.87', //Baku, Azerbaijan
      "Bangkok": '13.76,100.5', //Bangkok, Thailand
      "Barnaul": '53.35,83.77', //Barnaul, Altai Krai, Russia
      "Beirut": '33.89,35.5', //Beirut, Lebanon
      "Bishkek": '42.87,74.57', //Bishkek, Kyrgyzstan
      "Brunei": '4.9,114.94', //Bandar Seri Begawan, Brunei
      "Calcutta": '22.57,88.36', //Kolkata, West Bengal, India
      "Chita": '52.05,113.47', //Chita, Zabaykalsky Krai, Russia
      "Choibalsan": '46.67,113.29', //Baruun-Urt, Mongolia
      "Chongqing": '29.43,106.91', //Chongqing, China
      "Chungking": '29.43,106.91', //Chongqing, China
      "Colombo": '6.93,79.86', //Colombo, Sri Lanka
      "Dacca": '23.81,90.41', //Dhaka, Bangladesh
      "Damascus": '36.2,37.13', //Aleppo, Syria
      "Dhaka": '23.81,90.41', //Dhaka, Bangladesh
      "Dili": '-8.56,125.56', //Díli, Timor-Leste
      "Dubai": '25.2,55.27', //Dubai - United Arab Emirates
      "Dushanbe": '38.56,68.79', //Dushanbe, Tajikistan
      "Famagusta": '35.18,33.36', // Nicosia, Northern Cyprus
      "Gaza": '31.35,34.31', //Gaza Strip
      "Harbin": '45.8,126.53', //Harbin, Heilongjiang, China
      "Hebron": '31.77,35.21', //Jerusalem, Israel
      "Ho_Chi_Minh": '10.82,106.63', //Ho Chi Minh City, Vietnam
      "Hong_Kong": '22.4,114.11', //Hong Kong
      "Hovd": '47.98,91.63', //Khovd, Mongolia
      "Irkutsk": '52.29,104.31', //Irkutsk, Irkutsk Oblast, Russia
      "Istanbul": '41.01,28.98', //Istanbul, Turkey
      "Jakarta": '-6.18,106.87', //Jakarta, Indonesia
      "Jayapura": '-3.63,128.11', //Ambon Island, Maluku, Indonesia
      "Jerusalem": '31.77,35.21', //Jerusalem, Israel
      "Kabul": '34.56,69.21', //Kabul, Afghanistan
      "Kamchatka": '53.04,158.68', //Petropavlovsk-Kamchatskiy, Kamchatka Krai, Russia
      "Karachi": '24.86,67', //Karachi, Karachi City, Sindh, Pakistan
      "Kashgar": '39.47,75.99', //Kaxgar, Kashgar, Xinjiang, China
      "Kathmandu": '27.72,85.32', //Kathmandu 44600, Nepal
      "Katmandu": '27.72,85.32', //Kathmandu 44600, Nepal
      "Khandyga": '62.66,135.55', //Khandyga, Sakha Republic, Russia, 678720
      "Kolkata": '19.08,72.88', //Mumbai, Maharashtra, India
      "Krasnoyarsk": '56.02,92.89', //Krasnoyarsk, Krasnoyarsk Krai, Russia
      "Kuala_Lumpur": '6.12,102.25', //15200 Kota Bharu, Kelantan, Malaysia
      "Kuching": '1.55,110.36', //Kuching, Sarawak, Malaysia
      "Kuwait": '29.09,48.07', //Ahmadi, Kuwait
      "Macao": '22.2,113.54', //Macau
      "Macau": '22.2,113.54', //Macau
      "Magadan": '59.56,150.83', //Magadan, Magadan Oblast, Russia
      "Makassar": '-5.15,119.43', //Makassar, Makassar City, South Sulawesi, Indonesia
      "Manila": '14.68,121.04', //Quezon City, Metro Manila, Philippines
      "Muscat": '23.59,58.41', //Muscat, Oman
      "Nicosia": '35.19,33.38', //Nicosia, Cyprus
      "Novokuznetsk": '53.76,87.12', //Novokuznetsk, Kemerovo Oblast, Russia
      "Novosibirsk": '55.01,82.94', //Novosibirsk, Novosibirsk Oblast, Russia
      "Omsk": '54.99,73.32', //Omsk, Omsk Oblast, Russia
      "Oral": '51.23,51.39', //Uralsk, Kazakhstan
      "Phnom_Penh": '11.56,104.93', //Phnom Penh, Cambodia
      "Pontianak": '-0.03,109.34', //Pontianak, West Kalimantan, Indonesia
      "Pyongyang": '39.04,125.76', //Pyongyang, North Korea
      "Qatar": '25.29,51.53', //Doha, Qatar
      "Qostanay": '51.56,62.11',//khazakhstan
      "Qyzylorda": '44.85,65.48', //Kyzylorda, Kazakhstan
      "Rangoon": '16.87,96.2', //Yangon, Myanmar (Burma)
      "Riyadh": '24.71,46.68', //Riyadh Saudi Arabia
      "Saigon": '10.82,106.63', //Ho Chi Minh City, Vietnam
      "Sakhalin": '46.96,142.73', //Yuzhno-Sakhalinsk, Sakhalin Oblast, Russia
      "Samarkand": '39.63,66.97', //Samarkand, Uzbekistan
      "Seoul": '37.57,126.98', //Seoul, South Korea
      "Shanghai": '31.23,121.47', //Shanghai, China
      "Singapore": '1.35,103.82', //Singapore
      "Srednekolymsk": '67.44,153.73', //Srednekolymsk, Sakha Republic, Russia, 678790
      "Taipei": '25.03,121.57', //Taipei, Taiwan
      "Tashkent": '41.3,69.24', //Tashkent, Uzbekistan
      "Tbilisi": '41.72,44.83', //Tbilisi, Georgia
      "Tehran": '35.69,51.39', //Tehran, Tehran Province, Iran
      "Tel_Aviv": '32.09,34.78', //Tel Aviv-Yafo, Israel
      "Thimbu": '27.47,89.64', //Thimphu, Bhutan
      "Thimphu": '27.47,89.64', //Thimphu, Bhutan
      "Tokyo": '35.69,139.69', //Tokyo, Japan
      "Tomsk": '56.48,84.92',//russia
      "Ujung_Pandang": '-5.15,119.43', //Makassar, Makassar City, South Sulawesi, Indonesia
      "Ulaanbaatar": '47.89,106.91', //Ulaanbaatar, Mongolia
      "Ulan_Bator": '47.89,106.91', //Ulaanbaatar, Mongolia
      "Urumqi": '22.52,113.39', //Zhongshan, Guangdong, China
      "Ust-Nera": '64.56,143.22', //Ust-Nera, Sakha Republic, Russia, 678730
      "Vientiane": '17.98,102.63', //Vientiane, Laos
      "Vladivostok": '43.12,131.89', //Vladivostok, Primorsky Krai, Russia
      "Yakutsk": '52.05,113.47', //Chita, Zabaykalsky Krai, Russia
      "Yangon": '16.84,96.06',//myanmar
      "Yekaterinburg": '56.84,60.61', //Yekaterinburg, Sverdlovsk Oblast, Russia
      "Yerevan": '40.18,44.5', //Yerevan, Armenia
    },
    "Atlantic": {
      "Azores": '37.74,-25.68', //Ponta Delgada, Portugal
      "Bermuda": '32.29,-64.79', //Hamilton, Bermuda
      "Canary": '28.12,-15.44', //Las Palmas de Gran Canaria, Las Palmas, Spain
      "Cape_Verde": '14.93,-23.51', //Praia, Cape Verde
      "Faeroe": '62,-7', //Faroe Islands
      "Faroe": '62.01,-6.79', //Tórshavn, Faroe Islands
      "Jan_Mayen": '71.03,-8.29', //Jan Mayen, Svalbard and Jan Mayen
      "Madeira": '32.67,-16.92', //Funchal, Portugal
      "Reykjavik": '64.13,-21.82', //Reykjavík, Iceland
      "South_Georgia": '-54.28,-36.51', //Grytviken SIQQ 1ZZ, South Georgia and the South Sandwich Islands
      "St_Helena": '-15.93,-5.72', //Jamestown STHL 1ZZ, St Helena, Ascension and Tristan da Cunha
      "Stanley": '-51.7,-57.85', //Stanley FIQQ 1ZZ, Falkland Islands (Islas Malvinas)
    },
    "Australia": {
      "ACT": '-35.28,149.13', //Canberra ACT 2601, Australia
      "Adelaide": '-34.93,138.6', //Adelaide SA, Australia
      "Brisbane": '-27.47,153.03', //Brisbane QLD, Australia
      "Broken_Hill": '-31.95,141.45', //Broken Hill NSW 2880, Australia
      "Canberra": '-35.28,149.13', //Canberra ACT 2601, Australia
      "Currie": '-39.93,143.85', //Currie TAS 7256, Australia
      "Darwin": '-12.46,130.85', //Darwin NT, Australia
      "Eucla": '-31.68,128.89', //Eucla WA 6443, Australia
      "Hobart": '-42.88,147.33', //Hobart TAS 7000, Australia
      "LHI": '-31.56,159.08', //Lord Howe Island, New South Wales, Australia
      "Lindeman": '-20.44,149.04', //Lindeman Island, Queensland 4805, Australia
      "Lord_Howe": '-31.56,159.08', //Lord Howe Island, New South Wales, Australia
      "Melbourne": '-37.81,144.96', //Melbourne VIC, Australia
      "North": '-12.46,130.85', //Darwin NT, Australia
      "NSW": '-31.25,146.92', //New South Wales, Australia
      "Perth": '-31.95,115.86', //Perth WA, Australia
      "Queensland": '-20.92,142.7', //Queensland, Australia
      "South": '-30,136.21', //South Australia, Australia
      "Sydney": '-33.87,151.21', //Sydney NSW, Australia
      "Tasmania": '-41.45,145.97', //Tasmania, Australia
      "Victoria": '-37.47,144.79', //Victoria, Australia
      "West": '-31.95,115.86', //Perth WA, Australia
      "Yancowinna": '-31.7,141.6', //Yancowinna, Australia
    },
    "Brazil": {
      "Acre": '-9.02,-70.81', //State of Acre, Brazil
      "DeNoronha": '-3.84,-32.43', //Fernando de Noronha, State of Pernambuco, 53990-000, Brazil
      "East": '-22.66,-48.63', //Sao Paulo
      "West": '-2.57,-59.98', //Central-West Region, Brazil
    },
    "Canada": {
      "Atlantic": '44.65,-63.58', //Halifax Regional Municipality, NS, Canada
      "Central": '50.45,-104.62', //Regina, SK, Canada
      "East-Saskatchewan": '52.94,-106.45', //Saskatchewan, Canada
      "Eastern": '43.65,-79.38', //Toronto, ON, Canada
      "Mountain": '51.05,-114.07', //Calgary, AB, Canada
      "Newfoundland": '53.14,-57.66', //Newfoundland and Labrador, Canada
      "Pacific": '49.28,-123.12', //Vancouver, BC, Canada
      "Saskatchewan": '52.94,-106.45', //Saskatchewan, Canada
      "Yukon": '64.28,-135', //Yukon Territory, Canada
    },
    "Chile": {
      "Continental": '-33.45,-70.67', //Santiago, Santiago Metropolitan Region, Chile
      "EasterIsland": '-27.11,-109.35', //Easter Island, Valparaiso Region, Chile
    },
    "Etc": {
      "GMT-0": '51.50,-0.12', //London
      "GMT-1": '14.69,-17.44', //dakar
      "GMT-10": '-17.55,-149.55', //papeete
      "GMT-11": '-19.05,-169.89', //alofi
      "GMT-12": '0.19,-176.47', //baker island
      "GMT-13": '6.92,158.16', //palakir (+11)
      "GMT-14": '-27.33,153.08', //brisbane (+10)
      "GMT-2": '64.17,-51.73', //nuuk
      "GMT-3": '-22.66,-48.63', //Sao Paulo
      "GMT-4": '10.50,-66.91', //caracas
      "GMT-5": '4.59,-74.07', //bogota
      "GMT-6": '13.69,-89.19', //san salvador
      "GMT-7": '33.41,-112.00', //pheonix AZ
      "GMT-8": '61.21,-149.89', //anchorage (way off)
      "GMT-9": '-25.06,-130.10', //adamstown (not technically in -9)
      "GMT": '51.50,-0.12', //London
      "GMT+0": '51.50,-0.12', //London
      "GMT+1": '48.85,2.34', //Paris
      "GMT+10": '-27.33,153.08', //brisbane
      "GMT+11": '6.92,158.16', //palakir
      "GMT+12": '-36.84,174.77', //aukland
      "GMT+2": '47.48,19.13', //budapest
      "GMT+3": '33.31,44.38', //baghdad
      "GMT+4": '25.07,55.45', //dubai
      "GMT+5": '33.69,73.06', //islamabad
      "GMT+6": '23.75,90.37', //dhaka
      "GMT+7": '13.58,100.63', //bangkok
      "GMT+8": '39.90,116.39', //beijing
      "GMT+9": '28.34,145.03', //tokyo
      "GMT0": '51.50,-0.12', //London
      "Greenwich": '51.50,-0.12', //London
      "UCT": '51.50,-0.12', //London
      "Universal": '51.50,-0.12', //London
      "UTC": '51.50,-0.12', //London
      "Zulu": '51.50,-0.12', //London
    },
    "Europe": {
      "Amsterdam": '52.37,4.9', //Amsterdam, Netherlands
      "Andorra": '42.51,1.52', //AD500 Andorra la Vella, Andorra
      "Astrakhan": '46.36,48.06', //Astrakhan, Astrakhan Oblast, Russia
      "Athens": '37.98,23.73', //Athens, Greece
      "Belfast": '54.6,-5.93', //Belfast, UK
      "Belgrade": '44.79,20.45', //Belgrade, Serbia
      "Berlin": '52.52,13.4', //Berlin, Germany
      "Bratislava": '48.15,17.11', //Bratislava, Slovakia
      "Brussels": '50.85,4.35', //Brussels, Belgium
      "Bucharest": '44.43,26.1', //Bucharest, Romania
      "Budapest": '47.5,19.04', //Budapest, Hungary
      "Busingen": '47.7,8.69', //78266 Büsingen am Hochrhein, Germany
      "Chisinau": '47.01,28.86', //Chisinau, Moldova
      "Copenhagen": '55.68,12.57', //Copenhagen, Denmark
      "Dublin": '53.35,-6.26', //Dublin, Ireland
      "Gibraltar": '36.14,-5.35', //Gibraltar
      "Guernsey": '49.45,-2.55', //Saint Peter Port, Guernsey
      "Helsinki": '60.17,24.94', //Helsinki, Finland
      "Isle_of_Man": '54.15,-4.49', //Douglas, Isle of Man
      "Istanbul": '41.01,28.98', //Istanbul, Turkey
      "Jersey": '49.18,-2.1', //St Helier, Jersey
      "Kaliningrad": '54.71,20.45', //Kaliningrad, Kaliningrad Oblast, Russia
      "Kiev": '50.45,30.52', //Kyiv, Ukraine, 02000
      "Kirov": '58.59,49.57',//russia
      "Kyiv": '50.40,30.53',//ukraine
      "Lisbon": '38.72,-9.14', //Lisbon, Portugal
      "Ljubljana": '46.06,14.51', //Ljubljana, Slovenia
      "London": '51.51,-0.13', //London, UK
      "Luxembourg": '49.61,6.13', //Luxembourg City, Luxembourg
      "Madrid": '40.42,-3.7', //Madrid, Spain
      "Malta": '35.9,14.47', //Birkirkara, Malta
      "Mariehamn": '60.1,19.93', //Mariehamn, Åland Islands
      "Minsk": '53.9,27.56', //Minsk, Belarus
      "Monaco": '43.74,7.42', //Monaco
      "Moscow": '55.76,37.62', //Moscow, Russia
      "Nicosia": '35.19,33.38', //Nicosia, Cyprus
      "Oslo": '59.91,10.75', //Oslo, Norway
      "Paris": '48.86,2.35', //Paris, France
      "Podgorica": '42.43,19.26', //Podgorica, Montenegro
      "Prague": '50.08,14.44', //Prague, Czechia
      "Riga": '56.95,24.11', //Riga, Latvia
      "Rome": '41.9,12.5', //Rome, Metropolitan City of Rome, Italy
      "Samara": '53.24,50.22', //Samara, Samara Oblast, Russia
      "San_Marino": '43.97,12.48', //Serravalle, San Marino
      "Sarajevo": '43.86,18.41', //Sarajevo, Bosnia and Herzegovina
      "Saratov": '51.43,45.76',//russia
      "Simferopol": '44.62,33.53', //Sevastopol 99000
      "Skopje": '42,21.43', //Skopje, Macedonia (FYROM)
      "Sofia": '42.7,23.32', //Sofia, Bulgaria
      "Stockholm": '59.33,18.07', //Stockholm, Sweden
      "Tallinn": '59.44,24.75', //Tallinn, Estonia
      "Tirane": '41.33,19.82', //Tirana, Albania
      "Tiraspol": '46.85,29.6', //Tiraspol, Moldova
      "Ulyanovsk": '54.32,48.38', //Ulyanovsk, Ulyanovsk Oblast, Russia
      "Uzhgorod": '48.62,22.29', //Uzhhorod, Zakarpats'ka oblast, Ukraine
      "Vaduz": '47.17,9.51', //Schaan, Liechtenstein
      "Vatican": '41.9,12.45', //00120, Vatican City
      "Vienna": '48.21,16.37', //Vienna, Austria
      "Vilnius": '54.69,25.28', //Vilnius, Lithuania
      "Volgograd": '48.71,44.51', //Volgograd, Volgograd Oblast, Russia
      "Warsaw": '52.23,21.01', //Warsaw, Poland
      "Zagreb": '45.81,15.97', //u. l., Gundulićeva ul. 43, 10000, Zagreb, Croatia
      "Zaporozhye": '47.84,35.14', //Zaporizhzhia, Zaporiz'ka oblast, Ukraine, 69061
      "Zurich": '47.38,8.54', //Zürich, Switzerland
    },
    "Indian": {
      "Antananarivo": '-18.88,47.51', //Antananarivo, Madagascar
      "Chagos": '-6.34,71.86', //Chagos Archipelago, British Indian Ocean Territory
      "Christmas": '-10.43,105.67', //Flying Fish Cove, Christmas Island
      "Cocos": '-12.15,96.82', //West Island, 6799, Cocos (Keeling) Islands
      "Comoro": '-11.72,43.25', //Moroni, Comoros
      "Kerguelen": '-49.35,70.22', //Port-aux-Français, French Southern and Antarctic Lands
      "Mahe": '-4.62,55.45', //Victoria, Seychelles
      "Maldives": '4.18,73.51', //Malé, Maldives
      "Mauritius": '-20.16,57.5', //Port Louis, Mauritius
      "Mayotte": '-12.78,45.23', //Mamoudzou, Mayotte
      "Reunion": '-20.89,55.46', //Saint-Denis, Reunion
    },
    "Mexico": {
      "BajaNorte": '30.84,-115.28', //Baja California, Mexico
      "BajaSur": '26.04,-111.67', //Baja California Sur, Mexico
      "General": '18.51,-96.47', //General, Tetela, Oax., Mexico
    },
    "Pacific": {
      "Apia": '-13.85,-171.75', //Apia, Samoa
      "Auckland": '-36.85,174.76', //Auckland, New Zealand
      "Bougainville": '-6.23,155.57', //Arawa, Papua New Guinea
      "Chatham": '-35.27,174.08', //Waitangi 0293, New Zealand
      "Chuuk": '7.44,151.86', //Weno, Chuuk, Federated States of Micronesia
      "Easter": '-27.11,-109.35', //Easter Island, Valparaiso Region, Chile
      "Efate": '-17.73,168.33', //Port Vila, Vanuatu
      "Enderbury": '-3.13,-171.08', //Enderbury Island, Kiribati
      "Fakaofo": '-8.53,-172.52', //Atafu Village, Tokelau
      "Fiji": '-18.12,178.45', //Suva, Fiji
      "Funafuti": '-8.52,179.2', //Funafuti, Tuvalu
      "Galapagos": '-0.74,-90.32', //Puerto Ayora, Ecuador
      "Gambier": '-23.11,-134.97', //Mangareva, French Polynesia
      "Guadalcanal": '-9.45,159.97', //Honiara, Solomon Islands
      "Guam": '13.55,144.85', //Dededo, Guam
      "Honolulu": '21.31,-157.86', //Honolulu, HI, USA
      "Johnston": '16.73,-169.53', //Johnston Island, United States Minor Outlying Islands
      "Kanton": '-2.88,171.59',//pacific
      "Kiritimati": '1.87,-157.43', //Kiritimati, Kiribati
      "Kosrae": '5.33,163.01', //Tofol, Kosrae, Federated States of Micronesia
      "Kwajalein": '8.78,167.74', //Ebeye, Kwajalein Atoll, RMI
      "Majuro": '7.12,171.19', //Majuro, Majuro Atoll, RMI
      "Marquesas": '-8.91,-140.1', //Taioha'e, French Polynesia
      "Midway": '28.21,-177.37', //Midway Atoll, United States
      "Nauru": '-0.55,166.92', //Yaren, Nauru
      "Niue": '-19.06,-169.92', //Alofi, Niue
      "Norfolk": '-29.06,167.96', //Kingston, Norfolk Island
      "Noumea": '-22.27,166.44', //Noumea, New Caledonia
      "Pago_Pago": '-14.28,-170.7', //Pago Pago, Eastern District, American Samoa
      "Palau": '7.34,134.49', //Koror, Palau
      "Pitcairn": '-25.07,-130.1', //Adamstown PCRN 1ZZ, Pitcairn Islands
      "Pohnpei": '6.96,158.21', //Kolonia, Pohnpei, Federated States of Micronesia
      "Ponape": '6.97,158.2', //Kolonia, Pohnpei 96941, Federated States of Micronesia
      "Port_Moresby": '-9.44,147.18', //Port Moresby, Papua New Guinea
      "Rarotonga": '-21.21,-159.78', //Avarua District, Cook Islands
      "Saipan": '15.19,145.75', //Saipan, CNMI
      "Samoa": '-13.76,-172.1', //Samoa
      "Tahiti": '-17.56,-149.6', //Fa'a'ā, French Polynesia
      "Tarawa": '1.45,172.97', //Tarawa, Kiribati
      "Tongatapu": '-21.14,-175.2', //Nuku'alofa, Tonga
      "Truk": '7.45,151.75', //Chuuk Lagoon, Federated States of Micronesia
      "Wake": '19.28,166.65', //Wake Island
      "Wallis": '-13.28,-176.18', //Matā'utu, Wallis and Futuna
      "Yap": '33.79,-118.19', //1939 Pacific Avenue, Long Beach, CA 90806, USA
    }
  };
  let all = {};
  Object.keys(pcked).forEach(k => {
    Object.keys(pcked[k]).forEach(name => {
      let nums = pcked[k][name].split(',');
      all[k + '/' + name] = nums.map(str => Number(str));
    });
  });
  var points = all;

  const getPoint = function (tz) {
    if (!points.hasOwnProperty(tz)) {
      console.error(`Cannot find tz: '${tz}'`);
      return null
    }
    let [lat, lng] = points[tz];
    return { lat, lng }
  };

  var api = {
    sunrise: function () {
      let { lat, lng } = getPoint(this.tz);
      let r = getTimes(this.epoch, lat, lng);
      return this._from(r.sunrise)
    },
    solarNoon: function () {
      let { lat, lng } = getPoint(this.tz);
      let r = getTimes(this.epoch, lat, lng);
      return this._from(r.solarNoon)
    },
    sunset: function () {
      let { lat, lng } = getPoint(this.tz);
      let r = getTimes(this.epoch, lat, lng);
      return this._from(r.sunset)
    },
    dayLength: function () {
      let start = this.sunrise();
      let end = this.sunset();
      return start.diff(end)
    },
    sunPosition: function () {
      let { lat, lng } = getPoint(this.tz);
      return getPosition(this.epoch, lat, lng)
    },

  };

  var solar = {
    api
  };

  lib$1.plugin(timer);
  lib$1.plugin(solar);

  return lib$1;

}));
